!function(a){'use strict';function b(d,f){for(var g=0;g<d.length;++g)f(d[g],g)}function c(d,f){this.$select=a(d),this.options=this.mergeOptions(a.extend({},f,this.$select.data())),this.$select.attr('data-placeholder')&&(this.options.nonSelectedText=this.$select.data('placeholder')),this.originalOptions=this.$select.clone()[0].options,this.query='',this.searchTimeout=null,this.lastToggledInput=null,this.options.multiple='multiple'===this.$select.attr('multiple'),this.options.onChange=a.proxy(this.options.onChange,this),this.options.onSelectAll=a.proxy(this.options.onSelectAll,this),this.options.onDeselectAll=a.proxy(this.options.onDeselectAll,this),this.options.onDropdownShow=a.proxy(this.options.onDropdownShow,this),this.options.onDropdownHide=a.proxy(this.options.onDropdownHide,this),this.options.onDropdownShown=a.proxy(this.options.onDropdownShown,this),this.options.onDropdownHidden=a.proxy(this.options.onDropdownHidden,this),this.options.onInitialized=a.proxy(this.options.onInitialized,this),this.options.onFiltering=a.proxy(this.options.onFiltering,this),this.buildContainer(),this.buildButton(),this.buildDropdown(),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.wasDisabled=this.$select.prop('disabled'),this.options.disableIfEmpty&&0>=a('option',this.$select).length&&this.disable(),this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container),this.options.onInitialized(this.$select,this.$container)}'undefined'!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={after:['options','value','selectedOptions','enable','disable'],init:function(d,f,g){var l=a(d),m=ko.toJS(f());if(l.multiselect(m),g.has('options')){var n=g.get('options');ko.isObservable(n)&&ko.computed({read:function(){n(),setTimeout(function(){var t=l.data('multiselect');t&&t.updateOriginalOptions(),l.multiselect('rebuild')},1)},disposeWhenNodeIsRemoved:d})}if(g.has('value')){var o=g.get('value');ko.isObservable(o)&&ko.computed({read:function(){o(),setTimeout(function(){l.multiselect('refresh')},1)},disposeWhenNodeIsRemoved:d}).extend({rateLimit:100,notifyWhenChangesStop:!0})}if(g.has('selectedOptions')){var p=g.get('selectedOptions');ko.isObservable(p)&&ko.computed({read:function(){p(),setTimeout(function(){l.multiselect('refresh')},1)},disposeWhenNodeIsRemoved:d}).extend({rateLimit:100,notifyWhenChangesStop:!0})}var q=function(t){setTimeout(function(){t?l.multiselect('enable'):l.multiselect('disable')})};if(g.has('enable')){var r=g.get('enable');ko.isObservable(r)?ko.computed({read:function(){q(r())},disposeWhenNodeIsRemoved:d}).extend({rateLimit:100,notifyWhenChangesStop:!0}):q(r)}if(g.has('disable')){var s=g.get('disable');ko.isObservable(s)?ko.computed({read:function(){q(!s())},disposeWhenNodeIsRemoved:d}).extend({rateLimit:100,notifyWhenChangesStop:!0}):q(!s)}ko.utils.domNodeDisposal.addDisposeCallback(d,function(){l.multiselect('destroy')})},update:function(d,f){var l=a(d),m=ko.toJS(f());l.multiselect('setOptions',m),l.multiselect('rebuild')}}),c.prototype={defaults:{buttonText:function(d,f){if(0<this.disabledText.length&&(f.prop('disabled')||0==d.length&&this.disableIfEmpty))return this.disabledText;if(0===d.length)return this.nonSelectedText;if(this.allSelectedText&&d.length===a('option',a(f)).length&&1!==a('option',a(f)).length&&this.multiple)return this.selectAllNumber?this.allSelectedText+' ('+d.length+')':this.allSelectedText;if(d.length>this.numberDisplayed)return d.length+' '+this.nSelectedText;var g='',h=this.delimiterText;return d.each(function(){var k=void 0===a(this).attr('label')?a(this).text():a(this).attr('label');g+=k+h}),g.substr(0,g.length-this.delimiterText.length)},buttonTitle:function(d){if(0===d.length)return this.nonSelectedText;var g='',h=this.delimiterText;return d.each(function(){var k=void 0===a(this).attr('label')?a(this).text():a(this).attr('label');g+=k+h}),g.substr(0,g.length-this.delimiterText.length)},checkboxName:function(){return!1},optionLabel:function(d){return a(d).attr('label')||a(d).text()},optionClass:function(d){return a(d).attr('class')||''},onChange:function(){},onDropdownShow:function(){},onDropdownHide:function(){},onDropdownShown:function(){},onDropdownHidden:function(){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(){},onFiltering:function(){},enableHTML:!1,buttonClass:'btn btn-default',inheritClass:!1,buttonWidth:'auto',buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:'active',maxHeight:!1,includeSelectAllOption:!1,includeSelectAllIfMoreThan:0,selectAllText:' Select all',selectAllValue:'multiselect-all',selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!1,enableCaseInsensitiveFiltering:!1,enableFullValueFiltering:!1,enableClickableOptGroups:!1,enableCollapsibleOptGroups:!1,filterPlaceholder:'Search',filterBehavior:'text',includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:'None selected',nSelectedText:'selected',allSelectedText:'All selected',numberDisplayed:3,disableIfEmpty:!1,disabledText:'',delimiterText:', ',templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"><span class="multiselect-selected-text"></span> <b class="caret"></b></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item multiselect-filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove-circle"></i></button></span>',li:'<li><a tabindex="0"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:c,buildContainer:function(){this.$container=a(this.options.buttonContainer),this.$container.on('show.bs.dropdown',this.options.onDropdownShow),this.$container.on('hide.bs.dropdown',this.options.onDropdownHide),this.$container.on('shown.bs.dropdown',this.options.onDropdownShown),this.$container.on('hidden.bs.dropdown',this.options.onDropdownHidden)},buildButton:function(){this.$button=a(this.options.templates.button).addClass(this.options.buttonClass),this.$select.attr('class')&&this.options.inheritClass&&this.$button.addClass(this.$select.attr('class')),this.$select.prop('disabled')?this.disable():this.enable(),this.options.buttonWidth&&'auto'!==this.options.buttonWidth&&(this.$button.css({width:'100%',overflow:'hidden','text-overflow':'ellipsis'}),this.$container.css({width:this.options.buttonWidth}));var d=this.$select.attr('tabindex');d&&this.$button.attr('tabindex',d),this.$container.prepend(this.$button)},buildDropdown:function(){if(this.$ul=a(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass('pull-right'),this.options.maxHeight&&this.$ul.css({'max-height':this.options.maxHeight+'px','overflow-y':'auto','overflow-x':'hidden'}),this.options.dropUp){var d=Math.min(this.options.maxHeight,26*a('option[data-role!="divider"]',this.$select).length+19*a('option[data-role="divider"]',this.$select).length+(this.options.includeSelectAllOption?26:0)+(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering?44:0));this.$ul.css({'max-height':d+'px','overflow-y':'auto','overflow-x':'hidden','margin-top':'-'+(d+34)+'px'})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(a.proxy(function(d,f){var g=a(f),h=g.prop('tagName').toLowerCase();g.prop('value')===this.options.selectAllValue||('optgroup'===h?this.createOptgroup(f):'option'===h&&('divider'===g.data('role')?this.createDivider():this.createOptionValue(f)))},this)),a('li:not(.multiselect-group) input',this.$ul).on('change',a.proxy(function(d){var f=a(d.target),g=f.prop('checked')||!1,h=f.val()===this.options.selectAllValue;this.options.selectedClass&&(g?f.closest('li').addClass(this.options.selectedClass):f.closest('li').removeClass(this.options.selectedClass));var k=f.val(),l=this.getOptionByValue(k),m=a('option',this.$select).not(l),n=a('input',this.$container).not(f);if(h?g?this.selectAll(this.options.selectAllJustVisible,!0):this.deselectAll(this.options.selectAllJustVisible,!0):(g?(l.prop('selected',!0),this.options.multiple?l.prop('selected',!0):(this.options.selectedClass&&a(n).closest('li').removeClass(this.options.selectedClass),a(n).prop('checked',!1),m.prop('selected',!1),this.$button.click()),'active'===this.options.selectedClass&&m.closest('a').css('outline','')):l.prop('selected',!1),this.options.onChange(l,g),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()),this.$select.change(),this.updateButtonText(),this.options.preventInputChangeEvent)return!1},this)),a('li a',this.$ul).on('mousedown',function(d){if(d.shiftKey)return!1}),a('li a',this.$ul).on('touchstart click',a.proxy(function(d){d.stopPropagation();var f=a(d.target);if(d.shiftKey&&this.options.multiple){f.is('label')&&(d.preventDefault(),f=f.find('input'),f.prop('checked',!f.prop('checked')));var g=f.prop('checked')||!1;if(null!==this.lastToggledInput&&this.lastToggledInput!==f){var h=f.closest('li').index(),k=this.lastToggledInput.closest('li').index();if(h>k){var l=k;k=h,h=l}++k;var m=this.$ul.find('li').slice(h,k).find('input');m.prop('checked',g),this.options.selectedClass&&m.closest('li').toggleClass(this.options.selectedClass,g);for(var n=0,o=m.length;n<o;n++){var p=a(m[n]),q=this.getOptionByValue(p.val());q.prop('selected',g)}}f.trigger('change')}f.is('input')&&!f.closest('li').is('.multiselect-item')&&(this.lastToggledInput=f),f.blur()},this)),this.$container.off('keydown.multiselect').on('keydown.multiselect',a.proxy(function(d){if(!a('input[type="text"]',this.$container).is(':focus'))if(9===d.keyCode&&this.$container.hasClass('open'))this.$button.click();else{var f=a(this.$container).find('li:not(.divider):not(.disabled) a').filter(':visible');if(!f.length)return;var g=f.index(f.filter(':focus'));38===d.keyCode&&0<g?g--:40===d.keyCode&&g<f.length-1?g++:!~g&&(g=0);var h=f.eq(g);if(h.focus(),32===d.keyCode||13===d.keyCode){var k=h.find('input');k.prop('checked',!k.prop('checked')),k.change()}d.stopPropagation(),d.preventDefault()}},this)),this.options.enableClickableOptGroups&&this.options.multiple&&a('li.multiselect-group input',this.$ul).on('change',a.proxy(function(d){d.stopPropagation();var f=a(d.target),g=f.prop('checked')||!1,h=a(d.target).closest('li'),k=h.nextUntil('li.multiselect-group').not('.multiselect-filter-hidden').not('.disabled'),l=k.find('input'),n=[];this.options.selectedClass&&(g?h.addClass(this.options.selectedClass):h.removeClass(this.options.selectedClass)),a.each(l,a.proxy(function(o,p){var q=a(p).val(),r=this.getOptionByValue(q);g?(a(p).prop('checked',!0),a(p).closest('li').addClass(this.options.selectedClass),r.prop('selected',!0)):(a(p).prop('checked',!1),a(p).closest('li').removeClass(this.options.selectedClass),r.prop('selected',!1)),n.push(this.getOptionByValue(q))},this)),this.options.onChange(n,g),this.updateButtonText(),this.updateSelectAll()},this)),this.options.enableCollapsibleOptGroups&&this.options.multiple&&(a('li.multiselect-group .caret-container',this.$ul).on('click',a.proxy(function(d){var f=a(d.target).closest('li'),g=f.nextUntil('li.multiselect-group').not('.multiselect-filter-hidden'),h=!0;g.each(function(){h=h&&a(this).is(':visible')}),h?g.hide().addClass('multiselect-collapsible-hidden'):g.show().removeClass('multiselect-collapsible-hidden')},this)),a('li.multiselect-all',this.$ul).css('background','#f3f3f3').css('border-bottom','1px solid #eaeaea'),a('li.multiselect-all > a > label.checkbox',this.$ul).css('padding','3px 20px 3px 35px'),a('li.multiselect-group > a > input',this.$ul).css('margin','4px 0px 5px -20px'))},createOptionValue:function(d){var f=a(d);f.is(':selected')&&f.prop('selected',!0);var g=this.options.optionLabel(d),h=this.options.optionClass(d),k=f.val(),l=this.options.multiple?'checkbox':'radio',m=a(this.options.templates.li),n=a('label',m);n.addClass(l),m.addClass(h),this.options.enableHTML?n.html(' '+g):n.text(' '+g);var o=a('<input/>').attr('type',l),p=this.options.checkboxName(f);p&&o.attr('name',p),n.prepend(o);var q=f.prop('selected')||!1;o.val(k),k===this.options.selectAllValue&&(m.addClass('multiselect-item multiselect-all'),o.parent().parent().addClass('multiselect-all')),n.attr('title',f.attr('title')),this.$ul.append(m),f.is(':disabled')&&o.attr('disabled','disabled').prop('disabled',!0).closest('a').attr('tabindex','-1').closest('li').addClass('disabled'),o.prop('checked',q),q&&this.options.selectedClass&&o.closest('li').addClass(this.options.selectedClass)},createDivider:function(){var f=a(this.options.templates.divider);this.$ul.append(f)},createOptgroup:function(d){var f=a(d).attr('label'),g=a(d).attr('value'),h=a('<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><label><b></b></label></a></li>'),k=this.options.optionClass(d);h.addClass(k),this.options.enableHTML?a('label b',h).html(' '+f):a('label b',h).text(' '+f),this.options.enableCollapsibleOptGroups&&this.options.multiple&&a('a',h).append('<span class="caret-container"><b class="caret"></b></span>'),this.options.enableClickableOptGroups&&this.options.multiple&&a('a label',h).prepend('<input type="checkbox" value="'+g+'"/>'),a(d).is(':disabled')&&h.addClass('disabled'),this.$ul.append(h),a('option',d).each(a.proxy(function(l,m){this.createOptionValue(m)},this))},buildSelectAll:function(){'number'==typeof this.options.selectAllValue&&(this.options.selectAllValue=this.options.selectAllValue.toString());var d=this.hasSelectAll();if(!d&&this.options.includeSelectAllOption&&this.options.multiple&&a('option',this.$select).length>this.options.includeSelectAllIfMoreThan){this.options.includeSelectAllDivider&&this.$ul.prepend(a(this.options.templates.divider));var f=a(this.options.templates.li);a('label',f).addClass('checkbox'),this.options.enableHTML?a('label',f).html(' '+this.options.selectAllText):a('label',f).text(' '+this.options.selectAllText),this.options.selectAllName?a('label',f).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):a('label',f).prepend('<input type="checkbox" />');var g=a('input',f);g.val(this.options.selectAllValue),f.addClass('multiselect-item multiselect-all'),g.parent().parent().addClass('multiselect-all'),this.$ul.prepend(f),g.prop('checked',!1)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var d=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find('option').length>=d){if(this.$filter=a(this.options.templates.filter),a('input',this.$filter).attr('placeholder',this.options.filterPlaceholder),this.options.includeFilterClearBtn){var f=a(this.options.templates.filterClearBtn);f.on('click',a.proxy(function(){clearTimeout(this.searchTimeout),this.$filter.find('.multiselect-search').val(''),a('li',this.$ul).show().removeClass('multiselect-filter-hidden'),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},this)),this.$filter.find('.input-group').append(f)}this.$ul.prepend(this.$filter),this.$filter.val(this.query).on('click',function(g){g.stopPropagation()}).on('input keydown',a.proxy(function(g){13===g.which&&g.preventDefault(),clearTimeout(this.searchTimeout),this.searchTimeout=this.asyncFunction(a.proxy(function(){if(this.query!==g.target.value){this.query=g.target.value;var h,k;a.each(a('li',this.$ul),a.proxy(function(l,m){var n=0<a('input',m).length?a('input',m).val():'',o=a('label',m).text(),p='';if('text'===this.options.filterBehavior?p=o:'value'===this.options.filterBehavior?p=n:'both'===this.options.filterBehavior&&(p=o+'\n'+n),n!==this.options.selectAllValue&&o){var q=!1;if(this.options.enableCaseInsensitiveFiltering&&(p=p.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&'both'!==this.options.filterBehavior){var r=p.trim().substring(0,this.query.length);-1<this.query.indexOf(r)&&(q=!0)}else-1<p.indexOf(this.query)&&(q=!0);a(m).toggle(q).toggleClass('multiselect-filter-hidden',!q),a(m).hasClass('multiselect-group')?(h=m,k=q):(q&&a(h).show().removeClass('multiselect-filter-hidden'),!q&&k&&a(m).show().removeClass('multiselect-filter-hidden'))}},this))}this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.onFiltering(g.target)},this),300,this)},this))}}},destroy:function(){this.$container.remove(),this.$select.show(),this.$select.prop('disabled',this.options.wasDisabled),this.$select.data('multiselect',null)},refresh:function(){var d=a.map(a('li input',this.$ul),a);a('option',this.$select).each(a.proxy(function(f,g){for(var l,h=a(g),k=h.val(),m=d.length;0<m--;)if(k===(l=d[m]).val()){h.is(':selected')?(l.prop('checked',!0),this.options.selectedClass&&l.closest('li').addClass(this.options.selectedClass)):(l.prop('checked',!1),this.options.selectedClass&&l.closest('li').removeClass(this.options.selectedClass)),h.is(':disabled')?l.attr('disabled','disabled').prop('disabled',!0).closest('li').addClass('disabled'):l.prop('disabled',!1).closest('li').removeClass('disabled');break}},this)),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(d,f){a.isArray(d)||(d=[d]);for(var h,g=0;g<d.length;g++)if(h=d[g],null!==h&&void 0!==h){var k=this.getOptionByValue(h),l=this.getInputByValue(h);void 0!==k&&void 0!==l&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&l.closest('li').addClass(this.options.selectedClass),l.prop('checked',!0),k.prop('selected',!0),f&&this.options.onChange(k,!0))}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1),this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(d,f){a.isArray(d)||(d=[d]);for(var h,g=0;g<d.length;g++)if(h=d[g],null!==h&&void 0!==h){var k=this.getOptionByValue(h),l=this.getInputByValue(h);void 0!==k&&void 0!==l&&(this.options.selectedClass&&l.closest('li').removeClass(this.options.selectedClass),l.prop('checked',!1),k.prop('selected',!1),f&&this.options.onChange(k,!1))}this.updateButtonText(),this.updateSelectAll(),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},selectAll:function(d,f){var d=!('undefined'!=typeof d)||d,g=a('li:not(.divider):not(.disabled):not(.multiselect-group)',this.$ul),h=a('li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)',this.$ul).filter(':visible');d?(a('input:enabled',h).prop('checked',!0),h.addClass(this.options.selectedClass),a('input:enabled',h).each(a.proxy(function(k,l){var m=a(l).val(),n=this.getOptionByValue(m);a(n).prop('selected',!0)},this))):(a('input:enabled',g).prop('checked',!0),g.addClass(this.options.selectedClass),a('input:enabled',g).each(a.proxy(function(k,l){var m=a(l).val(),n=this.getOptionByValue(m);a(n).prop('selected',!0)},this))),a('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop('checked',!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),f&&this.options.onSelectAll()},deselectAll:function(d,f){var d=!('undefined'!=typeof d)||d,g=a('li:not(.divider):not(.disabled):not(.multiselect-group)',this.$ul),h=a('li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)',this.$ul).filter(':visible');d?(a('input[type="checkbox"]:enabled',h).prop('checked',!1),h.removeClass(this.options.selectedClass),a('input[type="checkbox"]:enabled',h).each(a.proxy(function(k,l){var m=a(l).val(),n=this.getOptionByValue(m);a(n).prop('selected',!1)},this))):(a('input[type="checkbox"]:enabled',g).prop('checked',!1),g.removeClass(this.options.selectedClass),a('input[type="checkbox"]:enabled',g).each(a.proxy(function(k,l){var m=a(l).val(),n=this.getOptionByValue(m);a(n).prop('selected',!1)},this))),a('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop('checked',!1),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),f&&this.options.onDeselectAll()},rebuild:function(){this.$ul.html(''),this.options.multiple='multiple'===this.$select.attr('multiple'),this.buildSelectAll(),this.buildDropdownOptions(),this.buildFilter(),this.updateButtonText(),this.updateSelectAll(!0),this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups(),this.options.disableIfEmpty&&0>=a('option',this.$select).length?this.disable():this.enable(),this.options.dropRight&&this.$ul.addClass('pull-right')},dataprovider:function(d){var f=0,g=this.$select.empty();a.each(d,function(h,k){var l;if(a.isArray(k.children))f++,l=a('<optgroup/>').attr({label:k.label||'Group '+f,disabled:!!k.disabled}),b(k.children,function(o){var p={value:o.value,label:o.label||o.value,title:o.title,selected:!!o.selected,disabled:!!o.disabled};for(var q in o.attributes)p['data-'+q]=o.attributes[q];l.append(a('<option/>').attr(p))});else{var m={value:k.value,label:k.label||k.value,title:k.title,'class':k.class,selected:!!k.selected,disabled:!!k.disabled};for(var n in k.attributes)m['data-'+n]=k.attributes[n];l=a('<option/>').attr(m),l.text(k.label||k.value)}g.append(l)}),this.rebuild()},enable:function(){this.$select.prop('disabled',!1),this.$button.prop('disabled',!1).removeClass('disabled')},disable:function(){this.$select.prop('disabled',!0),this.$button.prop('disabled',!0).addClass('disabled')},setOptions:function(d){this.options=this.mergeOptions(d)},mergeOptions:function(d){return a.extend(!0,{},this.defaults,this.options,d)},hasSelectAll:function(){return 0<a('li.multiselect-all',this.$ul).length},updateOptGroups:function(){var d=a('li.multiselect-group',this.$ul),f=this.options.selectedClass;d.each(function(){var g=a(this).nextUntil('li.multiselect-group').not('.multiselect-filter-hidden').not('.disabled'),h=!0;g.each(function(){var k=a('input',this);k.prop('checked')||(h=!1)}),f&&(h?a(this).addClass(f):a(this).removeClass(f)),a('input',this).prop('checked',h)})},updateSelectAll:function(){if(this.hasSelectAll()){var f=a('li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled',this.$ul),g=f.length,h=f.filter(':checked').length,k=a('li.multiselect-all',this.$ul),l=k.find('input');0<h&&h===g?(l.prop('checked',!0),k.addClass(this.options.selectedClass)):(l.prop('checked',!1),k.removeClass(this.options.selectedClass))}},updateButtonText:function(){var d=this.getSelected();this.options.enableHTML?a('.multiselect .multiselect-selected-text',this.$container).html(this.options.buttonText(d,this.$select)):a('.multiselect .multiselect-selected-text',this.$container).text(this.options.buttonText(d,this.$select)),a('.multiselect',this.$container).attr('title',this.options.buttonTitle(d,this.$select))},getSelected:function(){return a('option',this.$select).filter(':selected')},getOptionByValue:function(d){for(var k,f=a('option',this.$select),g=d.toString(),h=0;h<f.length;++h)if(k=f[h],k.value===g)return a(k)},getInputByValue:function(d){for(var k,f=a('li input:not(.multiselect-search)',this.$ul),g=d.toString(),h=0;h<f.length;++h)if(k=f[h],k.value===g)return a(k)},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(d,f,g){var h=Array.prototype.slice.call(arguments,3);return setTimeout(function(){d.apply(g||window,h)},f)},setAllSelectedText:function(d){this.options.allSelectedText=d,this.updateButtonText()}},a.fn.multiselect=function(d,f,g){return this.each(function(){var h=a(this).data('multiselect');h||(h=new c(this,'object'==typeof d&&d),a(this).data('multiselect',h)),'string'==typeof d&&(h[d](f,g),'destroy'===d&&a(this).data('multiselect',!1))})},a.fn.multiselect.Constructor=c,a(function(){a('select[data-role=multiselect]').multiselect()})}(window.jQuery);