(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1138:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(2),s=a(3),r=a(6),l=a.n(r),i=a(64),o=a(787),m=a(789),b=a(5),u=a(239),d=a(142),p=a(88),f=a(134),O=a(8);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){c=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(c)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _=Object(i.a)(Object(b.U)()).formatAmount;t.default=function(e){var t=Object(m.a)(),a=o.a.getContact(),r=o.a.getOrdersLimit(),i=o.a.getOrdersOffset(),w=o.a.getOrderContactId(),g=o.a.getOrderPage(),E=o.a.getSubscriptions(),v=o.a.getSubscriptionLoading(),y=o.a.getSubscriptionsLimit(),h=o.a.getSubscriptionsTotal(),k=o.a.getSubscriptionsOffset(),N=o.a.getSubscriptionPage();Object(n.useEffect)((function(){a&&"id"in a&&parseInt(a.id)!==parseInt(w)&&(t.fetchOrders(parseInt(a.id),i,r),a&&!Object(s.isEmpty)(a.wcs)&&t.fetchSubscription(parseInt(a.id),k,y))}),[a]);var A,S=o.a.getOrders(),C=o.a.getOrderLoading(),P=o.a.getOrdersTotal(),I=a&&a.wc&&a.wc.purchased_products?a.wc.purchased_products:[],L=a&&a.wc&&a.wc.purchased_products_cats?a.wc.purchased_products_cats:[],D=a&&a.wc&&a.wc.purchased_products_tags?a.wc.purchased_products_tags:[],F=a&&a.wc&&a.wc.used_coupons?a.wc.used_coupons:[],T=l()("bwfcrm-contacts-orders",{"has-search":!0}),J=[{key:"column_date",label:Object(c.__)("Date","wp-marketing-automations"),isLeftAligned:!0},{key:"column_order_id",label:Object(c.__)("Order ID","wp-marketing-automations"),isLeftAligned:!1},{key:"column_status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"column_products",label:Object(c.__)("Products","wp-marketing-automations"),isLeftAligned:!1},{key:"column_net_sale",label:Object(c.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1}],M=[{key:"date",label:Object(c.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"sub_id",label:Object(c.__)("Subscription ID","wp-marketing-automations"),isLeftAligned:!1},{key:"renew_date",label:Object(c.__)("Next Renewal Date","wp-marketing-automations"),isLeftAligned:!1},{key:"status",label:Object(c.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"total_renewals",label:Object(c.__)("Total Renewal","wp-marketing-automations"),isLeftAligned:!1},{key:"total",label:Object(c.__)("Total","wp-marketing-automations"),isLeftAligned:!1}],R=function(e,t){var a,c,r,l=[{display:Object(b.J)(e.date),value:e.date},{display:Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+e.id+"&action=edit"},"#"+e.id),value:e.id}];return"subscription"==t&&l.push({display:e.next_renewal_date?Object(b.J)(e.next_renewal_date):"-",value:""}),l.push({display:e.status,value:e.status}),"subscription"==t&&l.push({display:e.total_renewal?e.total_renewal:"0",value:""}),"order"==t&&l.push({display:(a=e.items,c="",r=[],Object.entries(a).map((function(e){var t=j(e,2),a=t[0],l=t[1];Object(s.isEmpty)(c)&&(c=Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a},l)),r.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?action=edit&post="+a},l))})),Object(n.createElement)(n.Fragment,null,!Object(s.isEmpty)(c)&&c,!Object(s.isEmpty)(r)&&r.length>1&&Object(n.createElement)(p.a,{items:r}))),value:""}),l.push({display:_(e.total),value:e.total}),l},x=Object(s.isArray)(S)?S.map((function(e){return R(e,"order")})):[],q=Object(s.isArray)(E)?E.map((function(e){return R(e,"subscription")})):[],U=function(e,n){var c=(n-1)*r;"order"==e?t.fetchOrders(parseInt(a.id),c,r):"subscription"==e&&t.fetchSubscription(parseInt(a.id),c,y)},H=function(e,t){return"per_page"!==t?function(){}:"order"==e?Q:"subscription"==e?V:void 0},Q=function(e){e!==r&&t.fetchOrders(parseInt(a.id),0,e)},V=function(e){e!==y&&t.fetchSubscription(parseInt(a.id),0,e)},$=function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Total Spend","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},a&&_(a.wc.total_order_value))),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("AOV","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},a&&function(){var e="";if(a.wc){var t,c=a.wc.aov_contact?parseFloat(a.wc.aov_contact):0,s=a.wc.aov_store?parseFloat(a.wc.aov_store):0;t=Number.isFinite(c)&&Number.isFinite(s)?0===s?0:Math.round((c-s)/s*100):null,e=c?t>0?Object(n.createElement)("div",null,_(c),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},t,"%")):Object(n.createElement)("div",null,_(c),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-r"},t,"%")):"-"}return e}())),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},C?Object(n.createElement)(d.a,{caption:Object(c.__)("Orders","wp-marketing-automations"),className:T,headers:J}):Object(s.isEmpty)(x)?"-":Object(n.createElement)(u.a,{className:T,title:"",rows:x,headers:J,query:{paged:g},rowsPerPage:r,totalRows:P,isLoading:C,showMenu:!1,rowHeader:!0,onPageChange:function(e){return U("order",e)},onQueryChange:function(e){return H("order",e)},emptyMessage:Object(c.__)("No orders found","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_20"}))))};return Object(n.createElement)("div",{className:"bwf-c-s-data"},Object(n.createElement)(f.a,{items:(A=[{key:0,label:Object(c.__)("Products","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Items","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(s.isEmpty)(I)?"-":I.map((function(e,t){return Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"post.php?post="+parseInt(e.id)+"&action=edit",key:t},e.name)})))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Categories","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(s.isEmpty)(L)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,L.map((function(e,t){return Object(n.createElement)("li",{key:e.id},Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_cat&post_type=product&tag_ID="+e.id,key:t},Object(n.createElement)("span",null,e.name)))})))))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(s.isEmpty)(D)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,D.map((function(e,t){return Object(n.createElement)("li",{key:e.id},Object(n.createElement)("a",{className:"bwf-a-no-underline",target:"_blank",href:"term.php?taxonomy=product_tag&post_type=product&tag_ID="+e.id,key:t},Object(n.createElement)("span",null,e.name)))})))))))},{key:1,label:Object(c.__)("Marketing","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Coupons","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(s.isEmpty)(F)?"-":Object(n.createElement)(n.Fragment,null,Object(n.createElement)("ul",null,F.map((function(e,t){return Object(n.createElement)("li",{key:t},Object(n.createElement)("span",{className:"bwf-mr-5"},Object(n.createElement)(O.a,{icon:"coupon"})),Object(n.createElement)("span",null,e))}))))))},{key:2,label:Object(c.__)("Orders","wp-marketing-automations"),display:$()}],a&&!Object(s.isEmpty)(a.wcs)&&A.push({key:3,label:Object(c.__)("Subscription","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(c.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},v?Object(n.createElement)(d.a,{caption:Object(c.__)("Subscription","wp-marketing-automations"),className:T,headers:M}):Object(s.isEmpty)(q)?"-":Object(n.createElement)(u.a,{className:T,title:"",rows:q,headers:M,query:{paged:N},rowsPerPage:y,totalRows:h,isLoading:v,showMenu:!1,rowHeader:!0,onPageChange:function(e,t){return U("subscription",e)},onQueryChange:function(e){return H("subscription",e)},emptyMessage:Object(c.__)("No subscriptions found","wp-marketing-automations")}),Object(n.createElement)("div",{className:"bwf_clear_20"})))}),A)}))}},1144:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(134),s=a(2),r=a(64),l=a(5),i=a(87),o=a(239),m=a(3),b=a(88);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,c=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(e){c=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(c)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){var e=u(Object(n.useState)(!1),2),t=e[0],a=e[1],d=Object(r.a)(Object(l.U)()).formatAmount,p=[{key:"column_date",label:Object(s.__)("Date","wp-marketing-automations"),isLeftAligned:!0},{key:"column_order_id",label:Object(s.__)("Order ID","wp-marketing-automations"),isLeftAligned:!1},{key:"column_status",label:Object(s.__)("Status","wp-marketing-automations"),isLeftAligned:!1},{key:"column_products",label:Object(s.__)("Products","wp-marketing-automations"),isLeftAligned:!1},{key:"column_net_sale",label:Object(s.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1}],f=[{date:"2020-03-11 13:00:00",first_name:"John",id:1321,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-16 06:54:00",first_name:"John",id:1322,item_count:2,items:{235:"Product 1"},last_name:"Doe",status:"Completed",total:"20"},{date:"2020-03-17 14:23:00",first_name:"John",id:1323,item_count:2,items:{347:"Product 2"},last_name:"Doe",status:"Completed",total:"30.02"},{date:"2020-03-20 09:45:00",first_name:"John",id:1324,item_count:2,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"24.51"},{date:"2020-03-21 21:34:00",first_name:"John",id:1325,item_count:3,items:{235:"Product 1",347:"Product 2"},last_name:"Doe",status:"Completed",total:"34.51"}].map((function(e){var t,a,c;return[{display:Object(l.J)(e.date),value:e.date},{display:Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},"#"+e.id),value:e.id},{display:e.status,value:e.status},{display:(t=e.items,a="",c=[],Object.entries(t).map((function(e){var t=u(e,2),s=(t[0],t[1]);Object(m.isEmpty)(a)&&(a=Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},s)),c.push(Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#"},s))})),Object(n.createElement)(n.Fragment,null,!Object(m.isEmpty)(a)&&a,!Object(m.isEmpty)(c)&&c.length>1&&Object(n.createElement)(b.a,{items:c}))),value:""},{display:d(e.total),value:e.total}]}));return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-data"},Object(n.createElement)(c.a,{items:[{key:0,label:Object(s.__)("Products","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-list-items"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Items","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value bwf-c-s-inline-p"},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 1"),Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},"Product 2"))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Categories","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",{key:0},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Category 1"))),Object(n.createElement)("li",{key:2},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Category 2")))))),Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-terms"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Tags","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",{key:0},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Tag 1"))),Object(n.createElement)("li",{key:2},Object(n.createElement)("a",{className:"bwf-a-no-underline",href:"#",onClick:function(e){a(!0)}},Object(n.createElement)("span",null,"Tag 2")))))))},{key:1,label:Object(s.__)("Marketing","wp-marketing-automations"),display:Object(n.createElement)("div",{className:"bwf-c-s-list bwf-c-s-term-ui bwf-c-s-list-coupons"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Coupons","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("ul",null,Object(n.createElement)("li",null,Object(n.createElement)("span",{className:"dashicons dashicons-tag"}),Object(n.createElement)("span",null,"Coupon 1")),Object(n.createElement)("li",null,Object(n.createElement)("span",{className:"dashicons dashicons-tag"}),Object(n.createElement)("span",null,"Coupon 2")))))},{key:2,label:Object(s.__)("Orders","wp-marketing-automations"),display:Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Total Spend","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},d(135))),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("AOV","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)("div",null,d(89),Object(n.createElement)("span",{className:"bwf-c-s-hl bwf-c-s-hl-g"},56,"%")))),Object(n.createElement)("div",{className:"bwf-c-s-list"},Object(n.createElement)("div",{className:"bwf-c-s-label"},Object(s.__)("Details","wp-marketing-automations")),Object(n.createElement)("div",{className:"bwf-c-s-po-value"},Object(n.createElement)(o.a,{className:"bwfcrm-contacts-orders",title:"",rows:f,headers:p,query:{paged:1},rowsPerPage:10,totalRows:5,isLoading:!1,showMenu:!1,rowHeader:!0}),Object(n.createElement)("div",{className:"bwf_clear_20"}))))}]})),Object(n.createElement)(i.a,{isOpen:t,onRequestClose:function(){return a(!1)}}))}}}]);