(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1082:function(t,e,n){},1158:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(63),o=n(2),i=n(239),c=n(130),s=n(89);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var b=function(){var t=Object(c.a)("automationv1List"),e=t.getStateProp,n=f(t,["getStateProp"]),a=Object(c.a)(s.a.recipient).getStateProp,r=Object(c.a)(s.a.conversion).getStateProp,o=Object(c.a)(s.a.contacts).getStateProp,i=Object(c.a)(s.a.analytics).getStateProp;return l(l({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return a("data")},getRecipientLoading:function(){return a("isLoading")},getRecipientOffset:function(){return a("offset")},getRecipientAutomationId:function(){return a("automationId")},getRecipientTotal:function(){return a("total")},getRecipientAutomation:function(){return a("automation")},getRecipientPage:function(){return parseInt(a("offset"))/parseInt(a("limit"))+1},getRecipientLimit:function(){return a("limit")},getConversionData:function(){return r("data")},getConversionLoading:function(){return r("isLoading")},getConversionOffset:function(){return r("offset")},getConversionAutomationId:function(){return r("automationId")},getConversionTotal:function(){return r("total")},getConversionAutomation:function(){return r("automation")},getConversionPage:function(){return parseInt(r("offset"))/parseInt(r("limit"))+1},getConversionLimit:function(){return r("limit")},getCountData:function(){return e("countData")},getContactData:function(){return o("data")},getContactLoading:function(){return o("isLoading")},getContactOffset:function(){return o("offset")},getContactAutomationId:function(){return o("automationId")},getContactTotal:function(){return o("total")},getContactAutomation:function(){return o("automation")},getContactPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getContactLimit:function(){return o("limit")},getContactCountData:function(){return o("contactCount")},getAnalyticsData:function(){return i("analytics")},getAnalyticsTileData:function(){return i("tiles")},getAnalyticsTableData:function(){return i("tableData")},getAnalyticsLoading:function(){return i("isLoading")},getAnalyticsType:function(){return i("type")},getAnalyticsAutomationData:function(){return i("automation")}})},p=n(129),d=n(5),O=n(17);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var v=function(){var t=Object(p.a)("automationv1List"),e=t.fetch,n=t.setStateProp,a=y(t,["fetch","setStateProp"]),r=Object(p.a)(s.a.recipient),o=r.fetch,i=r.setStateProp,c=Object(p.a)(s.a.conversion),u=c.fetch,l=c.setStateProp,m=Object(p.a)(s.a.contacts),f=m.fetch,b=m.setStateProp,g=Object(p.a)(s.a.analytics),h=g.fetch,v=g.setStateProp;return j(j({},a),{},{fetch:function(t,a,r,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var c=a.s,s=(a.page,a.filter,a.path,y(a,["s","page","filter","path"])),u={offset:r,limit:o,status:t,search:c,filters:s,version:i?2:1};e("GET",Object(d.k)("/automations"),u)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){o("GET",Object(d.k)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){i(t,e)},fetchConversion:function(t,e,n){l("automation",{}),u("GET",Object(d.k)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){l(t,e)},fetchContacts:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";b("automation",{}),f("GET",Object(d.k)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(r)))},setContactValues:function(t,e){b(t,e)},fetchAnalytics:function(t,e,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,i=0;4===parseInt(o)&&(i=1),h("GET",Object(d.k)("/analytics/emails/chart/")+"?"+Object(O.stringify)({after:e,before:n,interval:a,oid:t,type:r,mode:o,contact:i}))},setAnalyticsValues:function(t,e){v(t,e)}})},w=n(3),E=n(56),k=n(86),_=n(16),C=n(4),P=n(128),A=n(12),S=n.n(A),x=n(27),I=n(31),D=n.n(I),T=n(110),N=n.n(T),M=n(30),R=n.n(M),L=n(15),B=n(14),z=n.n(B);function F(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}var q=function(t){return t.name},U={name:"automation",className:"bwf-search-bwf-automation-result",options:function(t){return(e=regeneratorRuntime.mark((function t(e){var n,a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!D()(e)){t.next=2;break}return t.abrupt("return",[]);case 2:return n={search:e,version:1},t.next=5,S()({path:Object(d.k)("/search/automations?"+Object(O.stringify)(n)),method:"GET"});case 5:return a=t.sent,r=R()(a,"result")?a.result.map((function(t){return{key:t.id,name:t.title,label:t.title}})):[],t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})),n=function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(t){F(o,a,r,i,c,"next",t)}function c(t){F(o,a,r,i,c,"throw",t)}i(void 0)}))},function(t){return n.apply(this,arguments)})(t);var e,n},isDebounced:!0,getOptionIdentifier:function(t){return t.ID},getOptionKeywords:function(t){return[t.name]},getFreeTextOptions:function(t,e){return[{key:"name",label:Object(a.createElement)("span",{key:"name",className:"bwf-search-result-name"},z()({mixedString:Object(o.__)("All Automation with names that include {{query /}}","wp-marketing-automations"),components:{query:Object(a.createElement)("strong",{className:"components-form-token-field__suggestion-match"},t)}})),value:{id:t,name:t,tags:e.map((function(t){return R()(t,"value")?t.value:t})),searchTerm:t}}]},getOptionLabel:function(t,e){var n=Object(d.h)(q(t),e)||{};return Object(a.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":q(t)},n.suggestionBeforeMatch,Object(a.createElement)("strong",{className:"components-form-token-field__suggestion-match"},n.suggestionMatch),n.suggestionAfterMatch)},getOptionCompletion:function(t){return t}},V=n(263);function G(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}var H=function(t){var e=t.query,n=t.isV2,r=void 0!==n&&n,i=e.hasOwnProperty("s")?e.s:"",c=D()(i)?[]:[{key:i,label:Object(o.__)("Search Term: ","wp-marketing-automations")+i,bwfLabelSource:"bwfcrm_contacts",isSearchTerm:!0}],s=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var a,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(N()(n)){t.next=2;break}return t.abrupt("return");case 2:if(a=n.find((function(t){return R()(t,"searchTerm")})),!(Object(w.isUndefined)(a)&&n.length>0&&n[0].hasOwnProperty("key"))){t.next=6;break}return r?Object(L.k)({path:"/automation/".concat(n[0].key)},"/",e):window.location.href="admin.php?page=autonami-automations&edit="+n[0].key,t.abrupt("return");case 6:if(o=Object(w.isUndefined)(a)?void 0:a.searchTerm,i=R()(e,"s")&&!D()(e.s)?e.s:"",o!==i){t.next=10;break}return t.abrupt("return");case 10:r?Object(L.k)({s:o},"/automations",e):Object(L.k)({s:o},"/automations-v1",e);case 11:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){G(o,a,r,i,c,"next",t)}function c(t){G(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(t){return n.apply(this,arguments)}}();return Object(a.createElement)(x.a,{autocompleter:r?V.a:U,multiple:!1,allowFreeTextSearch:!0,inlineTags:!0,selected:c,onChange:s,placeholder:Object(o.__)("Search by name","wp-marketing-automations"),showClearButton:!0,disabled:!1})},Z=n(6),Y=n.n(Z),$=n(791),J=n(243),Q=n(246),W=n(43),K=n(8),X=n(240);function tt(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var at=function(t){var e=et(Object(a.useState)(!1),2),n=e[0],r=e[1],i=et(Object(a.useState)(""),2),c=i[0],s=i[1],u=et(Object(a.useState)({}),2),l=u[0],m=u[1],f=et(Object(a.useState)(""),2),b=f[0],p=f[1],O=Object(X.a)().setAutomationData,g=t.onCloseModal,j=t.query,h=t.isV2,y=void 0!==h&&h;Object(a.useEffect)((function(){r(!1),m({}),p("")}),[]);var v=function(){var t,e=(t=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=3;break}return s("Automation name is required field"),t.abrupt("return");case 3:return s(""),r(!0),t.prev=5,t.next=8,S()({path:Object(d.k)("/automations/create/"),method:"POST",data:{title:b,version:y}});case 8:if(!((e=t.sent)&&e.result&&e.result.automation_id)){t.next=17;break}if(!y){t.next=15;break}O("isNewAutomation",e.result.automation_id),setTimeout((function(){return Object(L.k)({path:"/automation/"+e.result.automation_id},"/",j)}),500),t.next=17;break;case 15:return window.location.href="admin.php?page=autonami-automations&edit="+e.result.automation_id,t.abrupt("return");case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(5),r(!1),m({error:!0,message:t.t0.message});case 23:case"end":return t.stop()}}),t,null,[[5,19]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){tt(o,a,r,i,c,"next",t)}function c(t){tt(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return e.apply(this,arguments)}}();return Object(a.createElement)(C.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",onRequestClose:function(){return g()}},Object(a.createElement)("div",{className:"bwf-modal-header"},Object(a.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:g,className:"bwf-modal-close"},Object(a.createElement)(K.a,{icon:"close",color:"#353030"}))),c&&Object(a.createElement)(C.Notice,{status:"error",onRemove:function(){return s("")}},c),l&&l.error||l&&l.success?l&&l.success&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(J.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):l&&l.error&&l.message?Object(a.createElement)("div",{className:"bwf-t-center"},Object(a.createElement)(Q.a,null),Object(a.createElement)("div",{className:"bwf-h1"},l.message)):Object(a.createElement)(W.a,null):Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&v()}},Object(a.createElement)(C.TextControl,{placeholder:Object(o.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(o.__)("Name","wp-marketing-automations"),value:b,onChange:function(t){return p(t)},disabled:n}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(C.Button,{onClick:function(){return g()},className:"bwf-cancel-btn"},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(C.Button,{isPrimary:!0,disabled:n,onClick:v,isBusy:n},Object(o.__)("Add","wp-marketing-automations")))))},rt=n(88),ot=n(64),it=n(132),ct=n(127),st=n(244),ut=n(195),lt=n(792);function mt(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function ft(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){mt(o,a,r,i,c,"next",t)}function c(t){mt(o,a,r,i,c,"throw",t)}i(void 0)}))}}var bt=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,s=t.actionType,u=n?n.length:0,l=Object(lt.a)(function(){var t=ft(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S()({path:Object(d.k)("/bulk-action/automation_v1"),method:"POST",headers:{"X-HTTP-Method-Override":"DELETE"},data:{ids:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=ft(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.mutate(n.map((function(t){return t.id})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f={delete:{title:Object(o._n)("Delete Automation","Delete Automations",u,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",u,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(P.a,{modalTitle:f.hasOwnProperty(s)&&f[s].hasOwnProperty("title")?f[s].title:Object(o._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("description")?f[s].description:"",confirmButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmBtn")?f[s].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("cancelBtn")?f[s].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(f.hasOwnProperty(s)&&f[s].hasOwnProperty("successMsg")?f[s].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:f.hasOwnProperty(s)&&f[s].hasOwnProperty("errorMsg")?f[s].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmDescription")?f[s].confirmDescription:"",isDelete:!0})};function pt(){return(pt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var gt=function(t){var e=t.floatingBarProps,n=void 0===e?{}:e,r=t.resetSelection,i=t.onSuccess,c=t.screenType,s=t.screenTypeId,u=t.automationId,l=dt(Object(a.useState)([]),2),m=l[0],f=l[1],b=dt(Object(a.useState)(!1),2),p=b[0],d=b[1],O=dt(Object(a.useState)(""),2),g=O[0],j=O[1],h=function(){r&&r(),f([])};Object(a.useEffect)((function(){h()}),[c]);var y=Object(a.useCallback)((function(t,e){f(e),j(t),d(!0)}),[]);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(ut.a,pt({actions:[{id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:y},n)),Object(a.createElement)(bt,{tasks:m,isOpen:p,onSuccess:function(){i&&i(g,m),h()},onError:h,onRequestClose:function(){return d(!1)},screenType:c,screenTypeId:s,actionType:g,automationId:u}))},jt=n(860);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wt(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function Et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var _t,Ct,Pt,At,St,xt,It,Dt,Tt,Nt,Mt,Rt,Lt,Bt,zt,Ft,qt,Ut,Vt,Gt,Ht,Zt,Yt,$t,Jt,Qt,Wt,Kt,Xt,te,ee,ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(a.createElement)(a.Fragment,null,"".concat(""!==t?t:"It seems there was an issue during the import",". For further help, contact "),Object(a.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Automation+Import+Failed&utm_campaign=Lite+Plugin",target:"_blank",rel:"noopener noreferrer"},Object(o.__)(" support. ","wp-marketing-automations")))},ae=function(t){var e=t.onRequestClose,n=t.isV2,r=void 0!==n&&n,i=Object(L.i)(),c=Et(Object(a.useState)({status:!1,modalTitle:Object(o.__)("Import Automation","wp-marketing-automations")}),2),s=c[0],u=c[1],l=Et(Object(a.useState)(null),2),m=l[0],f=l[1],b=function(){var t,n=(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(yt(yt({},s),{},{loading:!0,title:Object(o.__)("Please wait…","wp-marketing-automations"),message:Object(a.createElement)(a.Fragment,null,Object(o.__)("Your file ")+(null==m?void 0:m.name)+Object(o.__)(" importing is in progress."))})),t.prev=1,(n=new FormData).append("files",m),n.append("version",r?2:1),t.next=7,S()({method:"POST",body:n,path:Object(d.k)("/automations/import")}).then((function(t){200==t.code?t.result.hasOwnProperty("automation_id")?r?setTimeout((function(){Object(L.k)({path:"/automation/".concat(t.result.automation_id)},"/",i)}),1e3):window.location.href="admin.php?page=autonami-automations&edit="+t.result.automation_id:(Object(L.k)({path:"/automations/"},"/",i),e()):(f(null),u(yt(yt({},s),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:ne(t.message)})))}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),f(null),u(yt(yt({},s),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:ne(t.t0.message)}));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})),function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){wt(o,a,r,i,c,"next",t)}function c(t){wt(o,a,r,i,c,"throw",t)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){m&&b()}),[m]),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(C.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-import-funnel-modal",title:Object(o.__)("Import Automation","wp-marketing-automations"),onRequestClose:e},s.title&&Object(a.createElement)("div",{className:"bwf-import-modal-content bwf-t-center"},s.loading?Object(a.createElement)("div",null,Object(a.createElement)(W.a,{spaceClass:"no-space"})):Object(a.createElement)(K.a,{icon:s.status?"circle-tick":"circle-close",size:48}),Object(a.createElement)("div",{className:"bwf-drop-import-heading"},s.title),Object(a.createElement)("div",{className:"bwf-drop-import-content"},s.message)),!s.title&&Object(a.createElement)(jt.a,{onFileSelected:function(t){return f(t)},filetypeArray:["application/json"]})))},re=n(7);function oe(){return(oe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}var ie=function(t){return re.createElement("svg",oe({width:166,height:139,fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_t||(_t=re.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M92.288 99.751c13.301-.656 27.057-1.253 39.407.396 14.214 1.898 31.561 4.641 33.579 9.35 2.065 4.817-20.179 7.415-24.385 12.101-4.582 5.103 11.567 11.667-.383 15.491-11.393 3.645-32.131 1.151-48.218.06-13.179-.894-23.004-3.715-34.857-5.693-14.297-2.386-35.486-2.466-41.67-7.079-6.138-4.581 4.583-9.768 13.58-13.881 7.4-3.383 20.187-4.884 31.8-6.867 10.035-1.713 19.805-3.318 31.147-3.878z",fill:"#ADD3E4",opacity:.3})),Ct||(Ct=re.createElement("path",{d:"M13.017 105.034c4.122-7.56-8.892-11.114-12.03-8.115-3.137 2.998 7.264 16.853 12.03 8.115z",fill:"#E28CB5"})),Pt||(Pt=re.createElement("path",{d:"M18.488 102.727c8.09 0 4.429-14.492.97-14.492-4.337 0-10.317 14.492-.97 14.492z",fill:"#E28CB5"})),At||(At=re.createElement("path",{d:"M24.724 107.984c6.67 5.438 12.532-6.729 10.16-10.366-2.371-3.636-17.87 4.081-10.16 10.366z",fill:"#E28CB5"})),St||(St=re.createElement("path",{d:"M16.219 111.582c-1.126-2.609-2.774-5.04-4.898-7.224-3.613-3.717-7.414-5.46-7.452-5.477a.225.225 0 00-.185.41c.037.017 3.772 1.732 7.326 5.392 2.083 2.145 3.698 4.529 4.8 7.087.124.29.24.583.353.878h.48a21.684 21.684 0 00-.424-1.066zM19.256 91.207a.224.224 0 10-.446-.053c-.015.122-1.15 9.834-1.092 21.494h.45c-.058-11.63 1.073-21.319 1.088-21.441zM32.64 99.246a.224.224 0 00-.313-.062c-.032.022-3.277 2.208-6.615 5.803-1.819 1.958-3.886 4.584-5.4 7.661h.503c1.48-2.942 3.466-5.458 5.219-7.347 3.303-3.559 6.511-5.721 6.543-5.743a.226.226 0 00.062-.312z",fill:"#CC6697"})),xt||(xt=re.createElement("path",{d:"M18.169 112.648H9.887a.356.356 0 00-.338.466l.396 1.217.2.616 2.868 8.812a.58.58 0 00.552.401h10.337a.58.58 0 00.551-.401l2.868-8.812.2-.616.397-1.217a.355.355 0 00-.338-.466H18.17z",fill:"#D1E5ED"})),It||(It=re.createElement("path",{d:"M27.522 114.331l-.2.616H10.144l-.2-.616h17.577z",fill:"#A6BFCA"})),Dt||(Dt=re.createElement("path",{d:"M72.472 80.123H6.358a3.372 3.372 0 01-3.368-3.377v-63.1a3.372 3.372 0 013.368-3.377h66.114a3.372 3.372 0 013.368 3.376v63.101a3.372 3.372 0 01-3.368 3.377z",fill:"#ADD3E4"})),Tt||(Tt=re.createElement("path",{d:"M58.75 33.574h-5.266l-.92 2.985H48.46l5.846-15.978h3.612l5.89 15.978H59.68l-.93-2.985zM54.402 30.6h3.427l-1.719-5.542-1.708 5.542zM44.238 20.38h-31.37a1.012 1.012 0 01-1.01-1.014c0-.56.452-1.014 1.01-1.014h31.37c.559 0 1.011.454 1.011 1.014s-.453 1.013-1.01 1.013zM34.154 25.436H12.869a1.012 1.012 0 01-1.011-1.013c0-.56.452-1.014 1.01-1.014h21.286c.558 0 1.01.454 1.01 1.014s-.452 1.013-1.01 1.013z",fill:"#fff"})),Nt||(Nt=re.createElement("path",{d:"M18.186 33.72H12.58a.723.723 0 010-1.448h5.606a.723.723 0 010 1.448z",fill:"#0073AA"})),Mt||(Mt=re.createElement("path",{d:"M59.316 58.577H41.99a.723.723 0 01-.722-.724V54.93c0-.4.323-.724.722-.724h17.325c.398 0 .722.324.722.724v2.924c0 .4-.324.724-.722.724zM66.296 66.525H41.991a.723.723 0 01-.722-.724v-2.924c0-.4.323-.724.722-.724h24.305c.399 0 .722.324.722.724V65.8c0 .4-.323.724-.722.724zM22.65 71.244c0-.746.603-1.35 1.347-1.35-5.241 0-9.505-4.275-9.505-9.528 0-5.254 4.264-9.529 9.505-9.529 5.24 0 9.504 4.275 9.504 9.529 0-.746.603-1.35 1.347-1.35s1.347.604 1.347 1.35c0-6.743-5.472-12.228-12.198-12.228S11.8 53.623 11.8 60.366c0 6.742 5.472 12.227 12.198 12.227a1.348 1.348 0 01-1.347-1.35z",fill:"#fff"})),Rt||(Rt=re.createElement("path",{d:"M34.841 59.016c-.743 0-1.347.604-1.347 1.35 0 5.254-4.263 9.528-9.504 9.528-.744 0-1.347.605-1.347 1.35 0 .746.603 1.35 1.347 1.35 6.726 0 12.198-5.486 12.198-12.228 0-.746-.603-1.35-1.347-1.35z",fill:"#0073AA"})),Lt||(Lt=re.createElement("path",{d:"M3.047 14.269a4 4 0 014-4H71.8a4 4 0 014 4v1.088H3.047v-1.088z",fill:"#005D89"})),Bt||(Bt=re.createElement("ellipse",{cx:9.396,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),zt||(zt=re.createElement("ellipse",{cx:13.624,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),Ft||(Ft=re.createElement("ellipse",{cx:17.854,cy:12.813,rx:1.269,ry:1.272,fill:"#fff"})),qt||(qt=re.createElement("path",{d:"M96.251 9.667c.462 5.607 4.529 9.122 6.916 9.122.358 0 .748-.064 1.155-.176v2.797h6.054V14.3c.056-.148.11-.31.164-.485 2.684-.257 2.572-4.7.978-4.7-.291 0-.484.275-.607.552l-.395.396V8.056s-.891.084-2.645-2.592c-.757 1.15-6.792 2.955-11.635 2.147 0 0-.013.998.015 2.056z",fill:"#FCBEB7"})),Ut||(Ut=re.createElement("path",{d:"M103.585 0c4.176 0 5.011 2.23 5.011 2.23 1.781 0 4.509 3.262 2.867 6.886l-.009.008-.938.94V8.057s-.891.083-2.644-2.593c-.757 1.15-6.792 2.955-11.636 2.147 0 0-.012.998.016 2.056v.003C94.443 4.43 98.074 0 103.585 0z",fill:"#311643"})),Vt||(Vt=re.createElement("path",{d:"M105.38 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM99.186 10.277c.185 0 .334-.15.334-.334v-.625a.334.334 0 10-.668 0v.625c0 .185.15.334.334.334zM102.924 15.103c.596 0 1.002-.225 1.248-.43.31-.257.438-.539.444-.55a.153.153 0 00-.279-.127c-.017.038-.441.927-1.671.785a.154.154 0 00-.035.304c.102.012.2.018.293.018z",fill:"#311643"})),Gt||(Gt=re.createElement("path",{d:"M107.597 13.972c.912 0 1.651-.741 1.651-1.655a1.652 1.652 0 10-3.303 0c0 .914.739 1.655 1.652 1.655zM96.422 10.944c.21 1.11.56 2.123 1.004 3.025a1.652 1.652 0 001.568-1.652 1.652 1.652 0 00-2.572-1.373z",fill:"#F49795"})),Ht||(Ht=re.createElement("path",{d:"M96.847 9.63a2.345 2.345 0 002.34 2.345 2.345 2.345 0 002.339-2.256 1.524 1.524 0 011.516-.002 2.345 2.345 0 002.338 2.258 2.345 2.345 0 000-4.688c-1.205 0-2.2.918-2.326 2.092a1.797 1.797 0 00-1.54.001 2.345 2.345 0 00-2.327-2.093c-1.29 0-2.34 1.051-2.34 2.344zm6.5 0c0-1.123.912-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037zm-6.194 0c0-1.123.913-2.037 2.034-2.037a2.038 2.038 0 010 4.075 2.038 2.038 0 01-2.034-2.037z",fill:"#fff"})),Zt||(Zt=re.createElement("path",{d:"M104.322 21.41v-2.797c1.369-.377 2.928-1.3 4.099-2.18l-4.099 4.977z",fill:"#F9AFAB"})),Yt||(Yt=re.createElement("path",{d:"M89.85 111.672h6.412l6.219-33.125 4.563-14.356 11.044 47.481h6.412l-5.974-53.27H94.838l-4.988 53.27z",fill:"#0073AA"})),$t||($t=re.createElement("path",{d:"M95.752 114.254v4.538c0 .53-.428.958-.957.958H81.943a.221.221 0 01-.221-.221v-.874c0-.382.218-.73.561-.896l7.247-3.505h6.222zM118.783 114.254v4.538c0 .53.429.958.957.958h12.852a.221.221 0 00.221-.221v-.874a.995.995 0 00-.561-.896l-7.247-3.505h-6.222z",fill:"#2F3D6C"})),Jt||(Jt=re.createElement("path",{d:"M96.26 111.672l-.484 2.582h-6.248l.32-2.582h6.411zM124.499 111.672l.507 2.582h-6.222l-.697-2.582h6.412z",fill:"#FCBEB7"})),Qt||(Qt=re.createElement("path",{d:"M118.654 59.545l-24.051 1.361.234-2.503h23.689",fill:"#005D89"})),Wt||(Wt=re.createElement("path",{d:"M104.332 19.024l-9.165 3.983a3.764 3.764 0 00-1.648 1.379l-3.669 5.537 5.174 4.573 1.383-1.183-1.57 25.09h23.689l-1.452-16.36.322-8.73 1.23 1.227 5.466-4.208-2.937-4.794a7.285 7.285 0 00-3.026-2.746l-7.753-3.769s-3.517 2.311-6.044 0z",fill:"#7EB9D6"})),Kt||(Kt=re.createElement("path",{d:"M102.382 19.87a7.093 7.093 0 004.586 1.665c1.786 0 3.471-.65 4.787-1.84l-.239-.116a6.849 6.849 0 01-4.548 1.71 6.852 6.852 0 01-4.334-1.529l-.252.11z",fill:"#fff"})),Xt||(Xt=re.createElement("path",{d:"M118.42 23.575a2.038 2.038 0 002.709 1.925 7.296 7.296 0 00-2.624-2.51 2.046 2.046 0 00-.085.585zM92.972 25.206a2.038 2.038 0 002.851-2.485l-.66.286a3.765 3.765 0 00-1.647 1.378l-.544.82zM117.191 82.664a3.072 3.072 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.071 3.071 0 00-3.069 3.074 3.071 3.071 0 003.069 3.074zM96.716 82.664a3.071 3.071 0 003.07-3.074 3.072 3.072 0 00-3.07-3.074 3.072 3.072 0 00-3.069 3.074 3.072 3.072 0 003.07 3.074z",fill:"#005D89"})),te||(te=re.createElement("path",{d:"M63.675 23.922l.258-.043.04-.157a.708.708 0 01.638-.532l3.605-.244 2.509-1.022-1.4-1.75a.706.706 0 01.074-.961l2.954 2.28c.29.223.53.505.707.826l.924 1.687-.005.006 13.508 9.455 2.363-3.544 5.174 4.572-6.477 5.736a1.006 1.006 0 01-1.332-.014L72.01 26.516l-2.91.277a5.071 5.071 0 01-1.95-.195l-1.545-.467a.465.465 0 01-.295-.622l-1.1-.212a.475.475 0 01-.383-.418l-.02-.178h-.066a.392.392 0 01-.066-.779zM113.259 56.488l2.409-1.077a.673.673 0 00.359-.386l.349-.963-1.217.3-.388.834a.573.573 0 01-.746.285l.507-1.533c.095-.244.278-.444.512-.559l2.544-1.253 4.389-14.255-3.353-3.34 5.466-4.21 3.196 5.571c.44.766.493 1.695.145 2.506l-8.871 20.316-1.76.082a.574.574 0 01-.52-.28l-.192-.32-.927.075a.576.576 0 01-.51-.231l-.217-.295-.13.035a.792.792 0 01-.901-.393l-.643.215a.92.92 0 01.499-1.124z",fill:"#FCBEB7"})),ee||(ee=re.createElement("path",{d:"M125.42 37.19c0 1.005.716 1.841 1.665 2.025l.347-.808a2.808 2.808 0 00-.145-2.505l-.396-.69a2.063 2.063 0 00-1.471 1.979zM85.752 38.9l1.461 1.318c.377.34.948.346 1.332.014l1.432-1.238a2.434 2.434 0 00-4.225-.094z",fill:"#F9AFAB"})))};n(1082);function ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return se(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var ue=function(t){var e=t.onRequestClose,n=t.onAction,r=ce(Object(a.useState)(!1),2),i=r[0],c=r[1],s=ce(Object(a.useState)(!1),2),u=s[0],l=s[1],m=ce(Object(a.useState)(!1),2),f=m[0],b=m[1],p=ce(Object(a.useState)(!1),2),d=p[0],O=p[1],g=ce(Object(a.useState)(!1),2),j=g[0],h=g[1];return Object(a.createElement)("div",{className:"bwf-custom-experiment-modal"},Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-hero-svg"},Object(a.createElement)("div",null,ie())),Object(a.createElement)("div",{className:"bwf-h1"},Object(o.__)("Note: You would need to manually create an equivalent Automation in Next-Gen Builder.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-content-list"},Object(a.createElement)("div",{className:"modal-content-list-heading"},Object(o.__)("Please confirm","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-wrap"},Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(C.CheckboxControl,{checked:u,className:"bwf-export-toggler",onChange:function(t){l(t)}}),Object(o.__)("Yes, I have manually created this automation in the Automation Next-Gen Builder (new version) and no longer need this automation to work in older version.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(C.CheckboxControl,{checked:f,className:"bwf-export-toggler",onChange:function(t){b(t)}}),Object(o.__)("Yes, I understand that this automation will not trigger for new contacts after I confirm migration.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(C.CheckboxControl,{checked:d,className:"bwf-export-toggler",onChange:function(t){O(t)}}),Object(o.__)("Yes, I  understand that all the Scheduled Tasks for older contacts will still run.","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-modal-list-item"},Object(a.createElement)(C.CheckboxControl,{checked:j,className:"bwf-export-toggler",onChange:function(t){h(t)}}),Object(o.__)("Yes, I understand that I would not be able to edit the Automation after the migration is confirmed.","wp-marketing-automations")))),Object(a.createElement)("div",{className:"bwf-modal-note"},Object(a.createElement)("strong",null,Object(o.__)("Note: ","wp-marketing-automations")),Object(o.__)("If you are unsure about migration, click here to read our step-by-step guide to migrating the automation. You can also contact our support for any further questions.","wp-marketing-automations")," ",Object(a.createElement)("a",{href:"https://funnelkit.com/docs/autonami-2/automations/migrate-from-older-version/?utm_source=WordPress&utm_medium=Migrate+New+Automation&utm_campaign=Lite+Plugin",target:"_blank",className:"bwf-a-no-underline"},Object(o.__)("Learn More","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-modal-action",style:{marginBottom:0}},Object(a.createElement)(C.Button,{isSecondary:!0,onClick:e,style:{marginRight:"20px"}},Object(o.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(C.Button,{isPrimary:!0,onClick:function(){u&&f&&d&&j&&(c(!0),n())},isBusy:i,disabled:i||!(u&&f&&d&&j)},Object(o.__)("Yes, I Confirm Migration","wp-marketing-automations"))))};function le(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function me(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){le(o,a,r,i,c,"next",t)}function c(t){le(o,a,r,i,c,"throw",t)}i(void 0)}))}}function fe(t){return function(t){if(Array.isArray(t))return je(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||ge(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){de(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||ge(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(t,e){if(t){if("string"==typeof t)return je(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(t,e):void 0}}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var he=function(t){var e=Object(a.useContext)(d.d),n=t.type,r=t.query,c=r.s,s=v(),u=b(),l=s.fetch,m=s.setAutomationListValues,f=u.getAutomations,p=u.getPageNumber,g=u.getPerPageCount,j=u.getTotalCount,h=u.getOffset,y=u.getLoadingStatus,A=u.getCountData,x=Object(a.useRef)(new AbortController),I=Oe(Object(a.useState)({loading:!1,status:!1}),2),D=I[0],T=I[1],N=Oe(Object(a.useState)(0),2),M=N[0],R=N[1],B=Oe(Object(a.useState)(0),2),z=B[0],F=B[1],q=Oe(Object(a.useState)(!1),2),U=q[0],V=q[1],G=Oe(Object(a.useState)(!1),2),Z=G[0],J=G[1],Q=Oe(Object(a.useState)({}),2),W=Q[0],X=Q[1],tt=Oe(Object(a.useState)(!1),2),et=tt[0],nt=tt[1],lt=Oe(Object(a.useState)(!1),2),mt=lt[0],ft=lt[1],bt=f(),pt=h(),dt=g(),Ot=y(),jt=j(),ht=p(),yt=A(),vt="all";Object(w.isEmpty)(n)||("active"===n?vt=1:"inactive"===n&&(vt=2));var wt=Object(it.a)().getPageCountData,Et=Object(ct.a)(),kt=Et.setPageCountData,_t=Et.setPageData,Ct=Object(ot.a)(Object(d.U)()).formatAmount;Object(a.useEffect)((function(){J(!1),l(vt,r,pt,dt)}),[pt,dt,n,c]),Object(a.useEffect)((function(){if(!Ot&&!Z&&!Object(w.isEmpty)(bt)||mt)try{var t={automation_ids:[],version:1,force:mt};bt.map((function(e){t.automation_ids.push(e.id)})),S()({method:"GET",path:Object(d.k)("/automations-stats?"+Object(O.stringify)(t)),signal:x.current.signal}).then((function(t){200==t.code&&(X(t.result),J(!0),mt&&(e("Data Updated"),Object(d.Z)(e,1e3),ft(!1)))})).catch((function(t){console.log(t)}))}catch(t){J(!0),ft(!1),console.log(t)}_t("automation-v1-list")}),[bt,mt]),Object(a.useEffect)((function(){return J(!1),X({}),function(){x.current.abort()}}),[]);var Pt=Object(a.createElement)(a.Fragment,null,Object(a.createElement)(C.Button,{isPrimary:!0,onClick:function(){return V(!0)},className:"bwf-display-flex"},Object(o.__)("Add New Automation","wp-marketing-automations"))),At=wt();Object(a.useEffect)((function(){var t={};yt.hasOwnProperty("automations")&&(t["automations-v1_automations"]=parseInt(yt.automations)),yt.hasOwnProperty("task_history")&&(t["automations-v1_task-history"]=parseInt(yt.task_history)),kt(pe(pe({},At),t));var e=0,n=0;yt.hasOwnProperty("status_count")&&(yt.status_count.hasOwnProperty("active")&&(n=parseInt(yt.status_count.active)),yt.status_count.hasOwnProperty("inactive")&&(e=parseInt(yt.status_count.inactive))),R(n),F(e)}),[yt]),Object($.a)("automations","","",!1,Pt,0,!1,!1);var St=Object(a.useMemo)((function(){var t={};if(Array.isArray(bt)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=ge(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(bt);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[bt]),xt=Object(ut.b)(St),It=xt.singleSelectProps,Dt=xt.selectAllProps,Tt=xt.floatingBarProps,Nt=xt.resetSelection,Mt=[{key:"select_template",label:Object(a.createElement)(C.CheckboxControl,Dt),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-150"},{key:"actions",label:Object(o.__)("Actions","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"tasks",label:Object(o.__)("Tasks","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-300"},{key:"total_run",label:Object(o.__)("Total Runs","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-120"},Object(d.qb)()&&{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-col-center bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-60 bwf-col-center"}],Rt=function(t){t!==dt&&m("limit",t)},Lt=function(t){var e=[],n="";return Object(w.isEmpty)(t.automation_actions)||Object.entries(t.automation_actions).map((function(t){var a=Oe(t,2),r=(a[0],a[1]);Object(w.isEmpty)(n)&&(n=r[0]),e=[].concat(fe(e),fe(r))})),Object(a.createElement)(a.Fragment,null,Object(w.isEmpty)(n)?"-":Object(a.createElement)(a.Fragment,null,!Object(w.isEmpty)(n)&&n,!Object(w.isEmpty)(e)&&e.length>1&&Object(a.createElement)(rt.a,{items:e})))},Bt=function(){var t=me(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T(pe(pe({},a),{},{status:!0})),t.prev=1,t.next=4,S()({path:Object(d.k)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));T({status:!1}),e(t.message),l(vt,r,0,dt),Object(d.Z)(e,2e3)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),T(pe(pe({},a),{},{error:t.t0.message}));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),zt=function(){var t=me(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.prev=1,t.next=4,S()({path:Object(d.k)("/automations/".concat(n,"/duplicate")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),l(vt,r,0,dt),Object(d.Z)(e,2e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(d.Z)(e,1e3),setTimeout((function(){T({status:!0,modalTitle:Object(o.__)("Duplicate Automation"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),Ft=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},qt=function(){var t=me(regeneratorRuntime.mark((function t(){var n,a,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1&&void 0!==i[1]?i[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",r=parseInt(n)>0?Object(d.k)("/automations/".concat(n,"/export?version=1")):Object(d.k)("/automations/export/?version=1"),t.prev=5,t.next=8,S()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));Ft(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(d.Z)(e,2e3)}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),Object(d.Z)(e,1e3),setTimeout((function(){T({status:!0,modalTitle:Object(o.__)("Export Automation"),error:t.t0.message})}),[1500]);case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),Ut=function(){var t=me(regeneratorRuntime.mark((function t(n,a){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e(4===n?"Updating Automation...":n?"Activating Automation...":"Deactivating Automation..."),t.prev=2,t.next=5,S()({path:Object(d.k)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));e(4===n?Object(o.__)("Automation migrated","wp-marketing-automations"):n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=bt.map((function(t){return t.id==a&&(1==n?t.status="1":4==n?t.migrated=!0:t.status="0"),t})),4==n&&T({status:!1}),m("automations",r),Object(d.Z)(e,2e3)}));case 5:t.next=12;break;case 7:t.prev=7,t.t0=t.catch(2),4==n&&T(pe(pe({},r),{},{error:t.t0.message})),Object(d.Z)(e,1e3),setTimeout((function(){T({status:!0,modalTitle:Object(o.__)("Automation Status Update"),error:t.t0.message})}),[1500]);case 12:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}(),Vt=function(t){if(t.hasOwnProperty("migrated")&&t.migrated)return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-blue"},Object(o.__)("Migrated","wp-marketing-automations"));switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-gray"},Object(o.__)("Inactive","wp-marketing-automations"))}},Gt=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+t.id,className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},Ht=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},Zt=function(t){if(!Z)return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:"Loading"});var e=W.hasOwnProperty(t.id)?W[t.id]:{};return Object(a.createElement)(_.a,{gap:2,justify:"center"},Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Active",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automations-v1/task-history/scheduled",automation:t.id},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-scheduled",width:16,height:16})," ",e.hasOwnProperty("scheduled")?parseInt(e.scheduled):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Paused",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automations-v1/task-history/paused",automation:t.id},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-paused",width:16,height:16})," ",e.hasOwnProperty("paused")?parseInt(e.paused):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Completed",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automations-v1/task-history/completed",automation:t.id},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-completed",width:16,height:16})," ",e.hasOwnProperty("completed")?parseInt(e.completed):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Failed",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automations-v1/task-history/failed",automation:t.id},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-failed",width:16,height:16})," ",e.hasOwnProperty("failed")?parseInt(e.failed):0)))))},Yt=Array.isArray(bt)?bt.map((function(t){return[{display:It.hasOwnProperty(t.id)?Object(a.createElement)(C.CheckboxControl,It[t.id]):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(E.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(k.a,null,Object(a.createElement)("a",{href:"admin.php?page=autonami-automations&edit="+e.id,className:"bwf-a-no-underline"},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"edit"})),Object(a.createElement)(_.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),!(e.hasOwnProperty("migrated")&&e.migrated)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){Ut(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:1===parseInt(e.status)?"pause":"play"})),Object(a.createElement)(_.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){zt(e.id),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"duplicate"})),Object(a.createElement)(_.c,null,Object(o.__)("Duplicate","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:"",content:Object(a.createElement)(ue,{onRequestClose:function(){return T({})},onAction:function(){return Ut(4,e.id,t)}}),isDelete:!1,closeIcon:!0,modalClass:"bwf-admin-modal-medium"};T(pe({},t)),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"migrate"})),Object(a.createElement)(_.c,null,Object(o.__)("Confirm Migration","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){qt(e.id,e.name),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"export"})),Object(a.createElement)(_.c,null,Object(o.__)("Export","wp-marketing-automations"))))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),closeIcon:!1};T(pe(pe({},t),{},{onConfirm:function(){return Bt(e.id,t)}})),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"trash"})),Object(a.createElement)(_.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:Gt(t),value:t.name},{display:Ht(t),value:t.event},{display:Lt(t),value:""},{display:Zt(t),value:""},{display:parseInt(t.run_count)>0?parseInt(t.run_count):"0",value:t.run_count},Object(d.qb)()&&{display:t.revenue&&parseFloat(t.revenue)>0?Ct(t.revenue):"-",value:""},{display:Vt(t),value:""}];var e})):[],$t=Y()("bwfcrm-campaign-list-table",{"has-search":!0}),Jt=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(K.a,{icon:"zero-automation",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Grow your business with marketing automation","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Create Automations for abandoned cart, post-purchase, win-back, and more. Build automated workflows that generate profits while you sleep. Connect your site to Zapier, Slack, Twilio, Google Sheets and explore limitless automation possibilities.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Add New Automation","wp-marketing-automations"),proCheck:!1,onClick:function(){V(!0)}}]}}],Qt=Object(a.createElement)("div",{className:"bwf-display-flex gap-12"},Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return J(!1),void ft(!0)},disabled:!Z,isBusy:!Z&&mt},Object(a.createElement)(K.a,{icon:"retry",size:16}),Object(o.__)("Refresh")),Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){return qt()}},Object(a.createElement)(K.a,{icon:"export",size:16}),Object(o.__)("Export")),Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return nt(!0)}},Object(a.createElement)(K.a,{icon:"import",size:16}),Object(o.__)("Import")));return Object(a.createElement)(a.Fragment,null,Object(d.A)()?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(C.ButtonGroup,{className:"bwf-btn-group-tabs"},Object(a.createElement)(C.Button,{isPrimary:!n,isSecondary:!!n,onClick:function(){return Object(L.k)({path:"/automations-v1/"},"/",r)}},Object(o.__)("All","wp-marketing-automations"),yt.hasOwnProperty("automations")&&parseInt(yt.automations)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(yt.automations)):""),Object(a.createElement)(C.Button,{isPrimary:n&&"active"===n,isSecondary:n&&"active"!==n,onClick:function(){return Object(L.k)({path:"/automations-v1/list/active"},"/",r)}},Object(o.__)("Active","wp-marketing-automations"),parseInt(M)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(M)):""),Object(a.createElement)(C.Button,{isPrimary:n&&"inactive"===n,isSecondary:n&&"inactive"!==n,onClick:function(){return Object(L.k)({path:"/automations-v1/list/inactive"},"/",r)}},Object(o.__)("Inactive","wp-marketing-automations"),parseInt(z)>0?Object(a.createElement)("span",{className:"bwf-crm-btn-group-count"},parseInt(z)):"")),Object(a.createElement)("div",{className:"bwf_clear_20"}),Object(a.createElement)(i.a,{className:$t,rows:Yt,headers:Mt,query:{paged:ht},rowsPerPage:dt,totalRows:jt,isLoading:Ot,onPageChange:function(t,e){m("offset",(t-1)*dt)},onQueryChange:function(t){return"per_page"!==t?function(){}:Rt},rowHeader:!0,showMenu:!1,actions:[Object(a.createElement)(H,{key:"search",query:r,isV2:!1})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:Qt}),Object(a.createElement)(P.a,{modalTitle:D.modalTitle,deleteEntityName:D.deleteEntityName,confirmText:D.confirmText,confirmButtonText:D.buttonConfirm,cancelButtonText:D.buttonCancel,onConfirm:D.onConfirm,isLoading:D.loading,successMessage:D.success,errorMessage:D.error,content:D.content,onRequestClose:function(){return T({status:!1})},confirmDescription:D.hasOwnProperty("confirmDescription")?D.confirmDescription:"",isOpen:D.status,isDelete:D.isDelete,closeIcon:!D.hasOwnProperty("closeIcon")||D.closeIcon,modalClass:D.modalClass}),Object(a.createElement)(gt,{floatingBarProps:Tt,resetSelection:Nt,onSuccess:function(){return l(vt,r,pt,dt)}})):Object(a.createElement)(st.a,{data:Jt}),U&&Object(a.createElement)(at,{onCloseModal:function(){return V(!1)},query:r}),et&&Object(a.createElement)(ae,{onRequestClose:function(){return nt(!1)}}))},ye=n(794),ve=n(807);function we(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function Ee(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){we(o,a,r,i,c,"next",t)}function c(t){we(o,a,r,i,c,"throw",t)}i(void 0)}))}}var ke=function(t){var e=t.isOpen,n=t.tasks,r=t.onSuccess,i=t.onError,c=t.onRequestClose,s=t.actionType,u=n?n.length:0,l=Object(lt.a)(function(){var t=Ee(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S()({path:Object(d.k)("/bulk-action/automation_v2"),method:"POST",headers:{"X-HTTP-Method-Override":"DELETE"},data:{ids:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return l.reset()}),2500),r&&r()},onError:function(){i&&i()}}),m=function(){var t=Ee(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.mutate(n.map((function(t){return t.id})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f={delete:{title:Object(o._n)("Delete Automation","Delete Automations",u,"wp-marketing-automations"),description:Object(a.createElement)(a.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("automation","automations",u,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete automation","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(a.createElement)(P.a,{modalTitle:f.hasOwnProperty(s)&&f[s].hasOwnProperty("title")?f[s].title:Object(o._n)("Perform Actions","Perform Actions",u,"wp-marketing-automations"),deleteDescriptionText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("description")?f[s].description:"",confirmButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmBtn")?f[s].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:f.hasOwnProperty(s)&&f[s].hasOwnProperty("cancelBtn")?f[s].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:l.isLoading,successMessage:l.isSuccess&&(f.hasOwnProperty(s)&&f[s].hasOwnProperty("successMsg")?f[s].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:l.isError&&(l.error&&l.error.message?l.error.message:f.hasOwnProperty(s)&&f[s].hasOwnProperty("errorMsg")?f[s].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!c&&c()},isOpen:e,confirmDescription:f.hasOwnProperty(s)&&f[s].hasOwnProperty("confirmDescription")?f[s].confirmDescription:"",isDelete:!0})};function _e(){return(_e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function Ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Ae=function(t){var e=t.floatingBarProps,n=void 0===e?{}:e,r=t.resetSelection,i=t.onSuccess,c=t.screenType,s=t.screenTypeId,u=t.automationId,l=Ce(Object(a.useState)([]),2),m=l[0],f=l[1],b=Ce(Object(a.useState)(!1),2),p=b[0],d=b[1],O=Ce(Object(a.useState)(""),2),g=O[0],j=O[1],h=function(){r&&r(),f([])};Object(a.useEffect)((function(){h()}),[c]);var y=Object(a.useCallback)((function(t,e){f(e),j(t),d(!0)}),[]);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(ut.a,_e({actions:[{id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}],onAction:y},n)),Object(a.createElement)(ke,{tasks:m,isOpen:p,onSuccess:function(){i&&i(g,m),h()},onError:h,onRequestClose:function(){return d(!1)},screenType:c,screenTypeId:s,actionType:g,automationId:u}))},Se=n(774);function xe(t,e,n,a,r,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(a,r)}function Ie(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var o=t.apply(e,n);function i(t){xe(o,a,r,i,c,"next",t)}function c(t){xe(o,a,r,i,c,"throw",t)}i(void 0)}))}}function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||Re(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(t,e){if(t){if("string"==typeof t)return Le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(t,e):void 0}}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var Be=function(t){var e=Object(a.useContext)(d.d),n=t.type,r=t.query,c=t.automationV2,s=r.s,u=Object(ve.a)(),l=Object(ye.a)(),m=u.fetch,f=u.setAutomationListValues,b=l.getAutomations,p=l.getPageNumber,g=l.getPerPageCount,j=l.getTotalCount,h=l.getOffset,y=l.getLoadingStatus,v=l.getCountData,A=Object(X.a)().setAutomationData,x=Me(Object(a.useState)({loading:!1,status:!1}),2),I=x[0],D=x[1],T=Me(Object(a.useState)(!1),2),N=T[0],M=T[1],R=Me(Object(a.useState)(!1),2),B=R[0],z=R[1],F=Me(Object(a.useState)({}),2),q=F[0],U=F[1],V=Me(Object(a.useState)(!1),2),G=V[0],Z=V[1],J=b(),Q=h(),W=g(),tt=y(),et=j(),nt=p(),at=v(),rt="all";Object(w.isEmpty)(n)||("active"===n?rt=1:"inactive"===n&&(rt=2));var lt=Object(a.useRef)(new AbortController),mt=Object(ot.a)(Object(d.U)()).formatAmount;Object(a.useEffect)((function(){M(!1),m(rt,r,Q,W,c)}),[Q,W,n,s,c]),Object(a.useEffect)((function(){if(!tt&&!N&&!Object(w.isEmpty)(J)||B)try{var t={automation_ids:[],version:2,force:B};J.map((function(e){t.automation_ids.push(e.id)})),S()({method:"GET",path:Object(d.k)("/automations-stats?"+Object(O.stringify)(t)),signal:lt.current.signal}).then((function(t){200==t.code&&(U(t.result),M(!0),B&&(e("Data Updated"),Object(d.Z)(e,1e3),z(!1)))})).catch((function(t){console.log(t)}))}catch(t){M(!0),z(!1),console.log(t)}}),[J,B]);var ft=Object(a.createElement)(C.Button,{isPrimary:!0,onClick:function(){return Object(L.k)({path:"/automations/create"},"/",r)},className:"bwf-display-flex"},Object(o.__)("Add New Automation","wp-marketing-automations")),bt=Object(it.a)().getPageCountData,pt=Object(ct.a)().setPageCountData,dt=bt();Object(a.useEffect)((function(){var t=0,e=0;at.hasOwnProperty("status_count")&&(at.status_count.hasOwnProperty("active")&&(e=parseInt(at.status_count.active)),at.status_count.hasOwnProperty("inactive")&&(t=parseInt(at.status_count.inactive))),pt(Te(Te({},dt),{"automations-v2_all":parseInt(t)+parseInt(e),"automations-v2_active":e,"automations-v2_inactive":t}))}),[at]),Object(a.useEffect)((function(){return function(){lt.current.abort()}}),[]),Object($.a)(Object(w.isEmpty)(n)?"all":n,"","",!1,ft,0,!1,c);var Ot=Object(a.useMemo)((function(){var t={};if(Array.isArray(J)){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Re(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){c=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(J);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.id]=a}}catch(t){n.e(t)}finally{n.f()}}return t}),[J]),gt=Object(ut.b)(Ot),jt=gt.singleSelectProps,ht=gt.selectAllProps,yt=gt.floatingBarProps,vt=gt.resetSelection,wt=[{key:"select_template",label:Object(a.createElement)(C.CheckboxControl,ht),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"action",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-45"},{key:"title",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"event",label:Object(o.__)("Event","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"contacts",label:Object(o.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-300"},Object(d.qb)()&&{key:"revenue",label:Object(o.__)("Revenue","wp-marketing-automations"),cellClassName:"bwf-col-center bwf-w-120"},{key:"status",label:Object(o.__)("Status","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-col-center bwf-w-60"}],Et=function(t){t!==W&&f("limit",t)},kt=function(){var t=Ie(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(Te(Te({},a),{},{status:!0})),t.prev=1,t.next=4,S()({path:Object(d.k)("/automations"),method:"DELETE",data:{automation_ids:[n]}}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));D({status:!1}),e(t.message),m(rt,r,0,W,c),Object(d.Z)(e,2e3)}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),D(Te(Te({},a),{},{error:t.t0.message}));case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),_t=function(){var t=Ie(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(Object(o.__)("Duplicating…","wp-marketing-automations")),t.prev=1,t.next=4,S()({path:Object(d.k)("/automations/".concat(n,"/duplicate?version=2")),method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));e(Object(o.__)("Automation Duplicated","wp-marketing-automations")),m(rt,r,0,W,c),Object(d.Z)(e,2e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(d.Z)(e,1e3),setTimeout((function(){D({status:!0,modalTitle:Object(o.__)("Duplicate Automation"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),Ct=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),document.body.appendChild(a),a.click(),a.remove()},Pt=function(){var t=Ie(regeneratorRuntime.mark((function t(){var n,a,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1&&void 0!==i[1]?i[1]:"automation",e(Object(o.__)("Exporting…","wp-marketing-automations")),r="",r=parseInt(n)>0?Object(d.k)("/automations/".concat(n,"/export?version=2")):Object(d.k)("/automations/export/?version=2"),t.prev=5,t.next=8,S()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));Ct(t.result,a),e(Object(o.__)("Automation exported","wp-marketing-automations")),Object(d.Z)(e,2e3)}));case 8:t.next=14;break;case 10:t.prev=10,t.t0=t.catch(5),Object(d.Z)(e,1e3),setTimeout((function(){D({status:!0,modalTitle:Object(o.__)("Export Automation"),error:t.t0.message})}),[1500]);case 14:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(){return t.apply(this,arguments)}}(),At=function(){var t=Ie(regeneratorRuntime.mark((function t(n,a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(n?"Activating Automation...":"Deactivating Automation..."),t.prev=1,t.next=4,S()({path:Object(d.k)("/automations/toggle-state"),method:"POST",data:{state:n,automation_id:a}}).then((function(t){if(200!==t.code)throw Error(Object(d.i)(null==t?void 0:t.message));e(n?Object(o.__)("Automation activated","wp-marketing-automations"):Object(o.__)("Automation deactivated","wp-marketing-automations"));var r;r=J.map((function(t){return t.id==a&&(t.status=n?"1":"0"),t})),f("automations",r),Object(d.Z)(e,2e3)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),Object(d.Z)(e,1e3),setTimeout((function(){D({status:!0,modalTitle:Object(o.__)("Automation Status Update"),error:t.t0.message})}),[1500]);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}(),St=function(t){switch(parseInt(t.status)){case 1:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},Object(o.__)("Active","wp-marketing-automations"));default:return Object(a.createElement)("span",{className:"bwf-tags bwf-tag-gray"},Object(o.__)("Inactive","wp-marketing-automations"))}},xt=function(t){return Object(a.createElement)("a",{href:"admin.php?page=autonami&path=/automation/"+t.id,onClick:function(e){e.preventDefault(),A("listData",t.hasOwnProperty("name")?t.name:""),Object(L.k)({path:"/automation/".concat(t.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)("b",null,t.name))},It=function(t){return Object(a.createElement)(a.Fragment,null,t.event?t.event:Object(o.__)("Not Found","wp-marketing-automations"))},Dt=function(t){if(!N||Object(w.isEmpty)(q))return Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15",title:"Loading"});var e=q.hasOwnProperty(t.id)?q[t.id]:{};return Object(a.createElement)(_.a,{gap:2,justify:"center"},Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Active",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automation/".concat(t.id,"/contacts/active")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-scheduled",width:16,height:16})," ",e.hasOwnProperty("active")?parseInt(e.active):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Paused",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automation/".concat(t.id,"/contacts/paused")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-paused",width:16,height:16})," ",e.hasOwnProperty("paused")?parseInt(e.paused):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Completed",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automation/".concat(t.id,"/contacts/completed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-completed",width:16,height:16})," ",e.hasOwnProperty("complete")?parseInt(e.complete):0)))),Object(a.createElement)(_.c,null,Object(a.createElement)(C.Tooltip,{text:"Failed",position:"top"},Object(a.createElement)("div",{className:"bwf-tag-tooltip"},Object(a.createElement)("a",{className:"bwf-a-no-underline",onClick:function(){Object(L.k)({path:"/automation/".concat(t.id,"/contacts/failed")},"/",r)},style:{display:"inline-flex"}},Object(a.createElement)(K.a,{icon:"status-failed",width:16,height:16})," ",e.hasOwnProperty("failed")?parseInt(e.failed):0)))))},Tt=Array.isArray(J)?J.map((function(t){return[{display:jt.hasOwnProperty(t.id)?Object(a.createElement)(C.CheckboxControl,jt[t.id]):Object(a.createElement)(a.Fragment,null),value:null},{display:(e=t,Object(a.createElement)(E.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(k.a,null,Object(a.createElement)(Se.a,{to:"wp-admin/admin.php?page=autonami&path=/automation/"+e.id,onClick:function(t){t.preventDefault(),A("listData",e.hasOwnProperty("name")?e.name:""),Object(L.k)({path:"/automation/".concat(e.id)},"/",r)},className:"bwf-a-no-underline"},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"edit"})),Object(a.createElement)(_.c,null,Object(o.__)("Edit","wp-marketing-automations"))))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){At(1!==parseInt(e.status),e.id),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:1===parseInt(e.status)?"pause":"play"})),Object(a.createElement)(_.c,null,1===parseInt(e.status)?Object(o.__)("Deactivate","wp-marketing-automations"):Object(o.__)("Activate","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){_t(e.id),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"duplicate"})),Object(a.createElement)(_.c,null,Object(o.__)("Duplicate","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){Pt(e.id,e.name),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"export"})),Object(a.createElement)(_.c,null,Object(o.__)("Export","wp-marketing-automations")))),Object(a.createElement)(k.a,{isClickable:!0,onInvoke:function(){var t={status:!0,modalTitle:Object(o.__)("Delete Automation"),deleteEntityName:e.name,isDelete:!0,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations")};D(Te(Te({},t),{},{onConfirm:function(){return kt(e.id,t)}})),n()}},Object(a.createElement)(_.a,{justify:"flex-start"},Object(a.createElement)(_.c,null,Object(a.createElement)(K.a,{icon:"trash"})),Object(a.createElement)(_.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})),value:""},{display:xt(t),value:t.name},{display:It(t),value:t.event},{display:Dt(t),value:""},Object(d.qb)()&&{display:t.revenue&&parseFloat(t.revenue)>0?mt(t.revenue):"-",value:""},{display:St(t),value:""}];var e})):[],Nt=Y()("bwfcrm-campaign-list-table",{"has-search":!0}),Mt=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(a.createElement)(K.a,{icon:"zero-automation",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(o.__)("Grow your business with marketing automation","wp-marketing-automations")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(o.__)("Create Automations for abandoned cart, post-purchase, win-back, and more. Build automated workflows that generate profits while you sleep. Connect your site to Zapier, Slack, Twilio, Google Sheets and explore limitless automation possibilities.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(o.__)("Add New Automation","wp-marketing-automations"),proCheck:!1,onClick:function(){Object(L.k)({path:"/automations/create"},"/",r)}}]}}],Rt=Object(a.createElement)("div",{className:"bwf-display-flex gap-12"},Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Refresh Stats","wp-marketing-automations"),onClick:function(){return M(!1),void z(!0)},disabled:!N,isBusy:!N&&B},Object(a.createElement)(K.a,{icon:"retry",size:16}),Object(o.__)("Refresh")),Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){return Pt()}},Object(a.createElement)(K.a,{icon:"export",size:16}),Object(o.__)("Export")),Object(a.createElement)(C.Button,{isSecondary:!0,className:"bwf-btn-small bwf-btn-gray",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){return Z(!0)}},Object(a.createElement)(K.a,{icon:"import",size:16}),Object(o.__)("Import")));return Object(a.createElement)(a.Fragment,null,Object(d.A)()?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(i.a,{className:Nt,rows:Tt,headers:wt,query:{paged:nt},rowsPerPage:W,totalRows:et,isLoading:tt,onPageChange:function(t,e){f("offset",(t-1)*W)},onQueryChange:function(t){return"per_page"!==t?function(){}:Et},rowHeader:!0,showMenu:!1,actions:[Object(a.createElement)(H,{key:"search",query:r,isV2:!0})],emptyMessage:Object(o.__)("No automations found","wp-marketing-automations"),extraSectionBeforefilterCol:Rt}),Object(a.createElement)(P.a,{modalTitle:I.modalTitle,deleteEntityName:I.deleteEntityName,confirmText:I.confirmText,confirmButtonText:I.buttonConfirm,cancelButtonText:I.buttonCancel,onConfirm:I.onConfirm,isLoading:I.loading,successMessage:I.success,errorMessage:I.error,content:I.content,confirmDescription:I.hasOwnProperty("confirmDescription")?I.confirmDescription:"",onRequestClose:function(){return D({status:!1})},isOpen:I.status,isDelete:I.isDelete}),Object(a.createElement)(Ae,{floatingBarProps:yt,resetSelection:vt,onSuccess:function(){return m(rt,r,Q,W,c)}})):Object(a.createElement)(st.a,{data:Mt}),G&&Object(a.createElement)(ae,{onRequestClose:function(){return Z(!1)},isV2:!0}))},ze=n(87);function Fe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){r=!0,o=t}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}e.default=function(t){var e=t.match.params.type,n=Fe(Object(a.useState)(!1),2),o=n[0],i=n[1],c=t.automationV2,s=void 0!==c&&c,u=Object(L.i)();return Object(d.f)("Automations"),Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.a,null),Object(a.createElement)("div",{className:"bwfcrm-automations-list"},s?Object(a.createElement)(Be,{query:u,type:e,automationV2:s}):Object(a.createElement)(he,{query:u,type:e,automationV2:s})),!Object(d.gb)()&&Object(a.createElement)(ze.a,{isOpen:o,onRequestClose:function(){return i(!1)}}))}},791:function(t,e,n){"use strict";var a=n(0),r=n(127),o=n(2),i=n(5),c=n(51),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t)}};return e&&(n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isProFeature:!0,showOnClick:!0},n.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),isProFeature:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isProFeature:!0,showOnClick:!0},Object(i.qb)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isProFeature:!0,showOnClick:!0}),n};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],f=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},d=p.automation_nav,O=p.automationv2_nav,g=Object(r.a)(),j=g.setActiveMultiple,h=g.resetHeaderMenu,y=g.setL2NavType,v=g.setL2Nav,w=g.setBackLink,E=g.setL2Title,k=g.setL2Content,_=g.setBackLinkLabel,C=g.setL2NavAlign,P=g.setPageHeader;return Object(a.useEffect)((function(){h(),!i&&y("menu"),b||v(l?s(l,f):f?O:d),j({leftNav:f?"automations-v2":"automations-v1",rightNav:t}),n&&w(n),l&&w(n&&!f?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),i||f&&l&&_(Object(o.__)("All Automations","wp-marketing-automations-crm")),!f&&l&&_(Object(o.__)("All Automations","wp-marketing-automations")),l&&C("left"),e&&E(e),!n&&u&&k(u),P("Automations"),f&&P(Object(a.createElement)(a.Fragment,null,"Automations",Object(a.createElement)(c.a,{label:"Next Gen"}))),m&&v({})}),[t,f,e,b]),!0}},792:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var a=n(11),r=n(7),o=n.n(r),i=n(25),c=n(13),s=n(26),u=n(245),l=function(t){function e(e,n){var a;return(a=t.call(this)||this).client=e,a.setOptions(n),a.bindMethods(),a.updateResult(),a}Object(s.a)(e,t);var n=e.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(t){this.options=this.client.defaultMutationOptions(t)},n.onUnsubscribe=function(){var t;this.listeners.length||(null==(t=this.currentMutation)||t.removeObserver(this))},n.onMutationUpdate=function(t){this.updateResult();var e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,Object(a.a)({},this.options,{variables:void 0!==t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var t=this.currentMutation?this.currentMutation.state:Object(u.b)();this.currentResult=Object(a.a)({},t,{isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset})},n.notify=function(t){var e=this;i.a.batch((function(){e.mutateOptions&&(t.onSuccess?(null==e.mutateOptions.onSuccess||e.mutateOptions.onSuccess(e.currentResult.data,e.currentResult.variables,e.currentResult.context),null==e.mutateOptions.onSettled||e.mutateOptions.onSettled(e.currentResult.data,null,e.currentResult.variables,e.currentResult.context)):t.onError&&(null==e.mutateOptions.onError||e.mutateOptions.onError(e.currentResult.error,e.currentResult.variables,e.currentResult.context),null==e.mutateOptions.onSettled||e.mutateOptions.onSettled(void 0,e.currentResult.error,e.currentResult.variables,e.currentResult.context))),t.listeners&&e.listeners.forEach((function(t){t(e.currentResult)}))}))},e}(n(52).a),m=n(242);function f(t,e,n){var r=o.a.useRef(!1),s=o.a.useState(0)[1],u=Object(c.k)(t,e,n),f=Object(m.b)(),b=o.a.useRef();b.current?b.current.setOptions(u):b.current=new l(f,u);var p=b.current.getCurrentResult();o.a.useEffect((function(){r.current=!0;var t=b.current.subscribe(i.a.batchCalls((function(){r.current&&s((function(t){return t+1}))})));return function(){r.current=!1,t()}}),[]);var d=o.a.useCallback((function(t,e){b.current.mutate(t,e).catch(c.i)}),[]);if(p.error&&b.current.options.useErrorBoundary)throw p.error;return Object(a.a)({},p,{mutate:d,mutateAsync:p.mutate})}},794:function(t,e,n){"use strict";var a=n(130),r=n(89);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.getStateProp,n=s(t,["getStateProp"]),o=Object(a.a)(r.a.recipient).getStateProp,c=Object(a.a)(r.a.conversion).getStateProp,u=Object(a.a)(r.a.contacts).getStateProp,l=Object(a.a)(r.a.analytics).getStateProp;return i(i({},n),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return c("data")},getConversionLoading:function(){return c("isLoading")},getConversionOffset:function(){return c("offset")},getConversionAutomationId:function(){return c("automationId")},getConversionTotal:function(){return c("total")},getConversionAutomation:function(){return c("automation")},getConversionPage:function(){return parseInt(c("offset"))/parseInt(c("limit"))+1},getConversionLimit:function(){return c("limit")},getCountData:function(){return e("countData")},getContactData:function(){return u("data")},getContactLoading:function(){return u("isLoading")},getContactOffset:function(){return u("offset")},getContactAutomationId:function(){return u("automationId")},getContactTotal:function(){return u("total")},getContactAutomation:function(){return u("automation")},getContactPage:function(){return parseInt(u("offset"))/parseInt(u("limit"))+1},getContactLimit:function(){return u("limit")},getContactCountData:function(){return u("contactCount")},getAnalyticsData:function(){return l("analytics")},getAnalyticsTileData:function(){return l("tiles")},getAnalyticsTableData:function(){return l("tableData")},getAnalyticsLoading:function(){return l("isLoading")},getAnalyticsType:function(){return l("type")},getAnalyticsAutomationData:function(){return l("automation")}})}},807:function(t,e,n){"use strict";var a=n(129),r=n(5),o=n(89),i=n(17);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a=function(){var t=Object(a.a)("automationList"),e=t.fetch,n=t.setStateProp,c=l(t,["fetch","setStateProp"]),u=Object(a.a)(o.a.recipient),m=u.fetch,f=u.setStateProp,b=Object(a.a)(o.a.conversion),p=b.fetch,d=b.setStateProp,O=Object(a.a)(o.a.contacts),g=O.fetch,j=O.setStateProp,h=Object(a.a)(o.a.analytics),y=h.fetch,v=h.setStateProp;return s(s({},c),{},{fetch:function(t,a,o,i){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var s=a.s,u=(a.page,a.filter,a.path,l(a,["s","page","filter","path"])),m={offset:o,limit:i,status:t,search:s,filters:u,version:c?2:1};e("GET",Object(r.k)("/automations"),m)},setAutomationListValues:function(t,e){n(t,e)},fetchRecipient:function(t,e,n){m("GET",Object(r.k)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(n)))},setRecipientsValues:function(t,e){f(t,e)},fetchConversion:function(t,e,n){d("automation",{}),p("GET",Object(r.k)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(n)))},setConversionValues:function(t,e){d(t,e)},fetchContacts:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),g("GET",Object(r.k)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(o)))},setContactValues:function(t,e){j(t,e)},fetchAnalytics:function(t,e,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(c)&&(s=1),y("GET",Object(r.k)("/analytics/emails/chart/")+"?"+Object(i.stringify)({after:e,before:n,interval:a,oid:t,type:o,mode:c,contact:s}))},setAnalyticsValues:function(t,e){v(t,e)}})}},860:function(t,e,n){"use strict";var a=n(0),r=n(2),o=n(5),i=(n(414),n(4)),c=n(8);e.a=function(t){var e=t.onFileSelected,n=(t.htmlData,t.filetypeArray),s=(t.btnLabel,t.type),u=void 0===s?"automation":s,l=Object(a.useContext)(o.d),m=function(t){t&&t[0]&&"type"in t[0]?n.includes(t[0].type)?(e(t[0]),Object(o.Z)(l,3e3)):l(Object(r.__)("Uploaded file is not valid.","wp-marketing-automations")):l(Object(r.__)("Uploaded file not found","wp-marketing-automations"))};return Object(a.createElement)("div",{className:"bwf-component-import-wrapper"},Object(a.createElement)(i.DropZoneProvider,null,Object(a.createElement)("div",{className:"bwf-import-area-wrapper"},Object(a.createElement)(i.FormFileUpload,{isSecondary:!0,accept:"application/json",onChange:function(t){return m(t.target.files)},render:function(t){var e=t.openFileDialog;return Object(a.createElement)("div",{className:"bwf-import-area",onClick:e},Object(a.createElement)(c.a,{icon:"json-upload",size:72}),Object(a.createElement)("div",{className:"bwf-drop-import-heading"},Object(r.__)("Click or Drag & Drop your JSON file","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-drop-import-content"},"This tool allows you to import the ".concat(u," from the JSON file.")))}}),Object(a.createElement)(i.DropZone,{onFilesDrop:m,onHTMLDrop:m,onDrop:m}))))}}}]);