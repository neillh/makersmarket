(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1169:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(791),o=a(5),c=a(127),i=a(264),s=a(28),l=a(15);function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var b=function(t){var e=t.query;return Object(n.createElement)("div",{className:"bwf-crm-emails-report-filter"},Object(n.createElement)(i.a,{siteLocale:"en-US",path:"/",query:e,onDateSelect:function(t){var a=m(m({},e),t);delete a.compare,Object(l.k)(a,"/",{})},showDatePicker:!0,isoDateFormat:s.g,hideCompare:!0,dateQuery:function(t){t.compare="previous_year";var e=Object(s.e)(t),a=e.period,n=e.compare,r=e.before,o=e.after,c=Object(s.c)(t);return{period:a,compare:n,before:r,after:o,primaryDate:c.primary,secondaryDate:c.secondary}}(e),currency:Object(o.U)()}))},f=a(63),O=a(2),d=a(253),v=a(251),j=a(250),_=a(794),g=a(64),y=a(8),h=a(3),k=function(t){var e=t.query,a=t.type,r=t.automationId,c=Object(g.a)(Object(o.U)()).formatAmount,i=Object(_.a)(),s=i.getAnalyticsTileData,u=i.getAnalyticsLoading,m=e.chart?e.chart:function(){switch(a){case"contact":return"active_contacts";default:return"email_sents"}}(),p=u(),b=s(),f=function(t){return Object(h.isEmpty)(b)||!b.hasOwnProperty(t)||Object(h.isNull)(b[t])?0:b[t]};return Object(n.createElement)("div",{className:"bwf-crm-emails-report-tiles"},p?function(){switch(a){case"email":return Object(n.createElement)(j.a,{numberOfItems:Object(o.qb)()?5:3,hideDelta:!0});case"sms":return Object(n.createElement)(j.a,{numberOfItems:Object(o.qb)()?4:2,hideDelta:!0});case"contact":return Object(n.createElement)(j.a,{numberOfItems:Object(o.qb)()?6:3,hideDelta:!0})}}():function(){switch(a){case"email":return Object(n.createElement)(d.a,null,(function(){var t=[];return t=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("email_sents")),label:Object(O.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=email_sents"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_sents"},"/",e)},selected:"email_sents"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"sent",size:30}))}),Object(n.createElement)(v.a,{key:2,value:parseFloat(f("open_rate"))+" %",label:Object(O.__)("Open Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=open_rate"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"open_rate"},"/",e)},selected:"open_rate"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"open-in-popup",size:30}))}),Object(n.createElement)(v.a,{key:3,value:parseFloat(f("click_rate"))+" %",label:Object(O.__)("Click Rate","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=click_rate"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"click_rate"},"/",e)},selected:"click_rate"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"cursor",size:30}))})],Object(o.qb)()&&t.push(Object(n.createElement)(v.a,{key:4,value:parseInt(f("total_orders")),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_orders"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_orders"},"/",e)},selected:"total_orders"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:5,value:c(f("total_revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/email&chart=total_revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_revenue"},"/",e)},selected:"total_revenue"===m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"revenue",size:30}))})),t}));case"sms":return Object(n.createElement)(d.a,null,(function(){var t=[];return t=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("email_sents")),label:Object(O.__)("Sent","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_sents"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_sents"},"/",e)},selected:"email_sents"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"sent",size:30}))}),Object(n.createElement)(v.a,{key:2,value:parseInt(f("email_click")),label:Object(O.__)("Clicks","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=email_click"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"email_click"},"/",e)},selected:"email_click"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"cursor",size:30}))})],Object(o.qb)()&&t.push(Object(n.createElement)(v.a,{key:3,value:parseInt(f("total_orders")),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_orders"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_orders"},"/",e)},selected:"total_orders"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:4,value:c(f("total_revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/sms&chart=total_revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"total_revenue"},"/",e)},selected:"total_revenue"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"revenue",size:30}))})),t}));case"contact":return Object(n.createElement)(d.a,null,(function(){var t=[];return t=[Object(n.createElement)(v.a,{key:1,value:parseInt(f("active_contacts")),label:Object(O.__)("Active Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=active_contacts"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"active_contacts"},"/",e)},selected:"active_contacts"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"contact-tile",size:30,color:"#0073aa"}))}),Object(n.createElement)(v.a,{key:2,value:parseInt(f("complete_contacts")),label:Object(O.__)("Completed Contacts","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=complete_contacts"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"complete_contacts"},"/",e)},selected:"complete_contacts"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"total-customer",size:30,color:"#0073aa"}))})],Object(o.qb)()&&t.push(Object(n.createElement)(v.a,{key:3,value:f("conversions"),label:Object(O.__)("Orders","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=conversions"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"conversions"},"/",e)},selected:"conversions"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"order",size:30}))}),Object(n.createElement)(v.a,{key:4,value:c(f("revenue")),label:Object(O.__)("Revenue","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=revenue"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"revenue"},"/",e)},selected:"revenue"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"revenue",size:30}))}),Object(n.createElement)(v.a,{key:5,value:c(parseFloat(f("aov")).toFixed(2)),label:Object(O.__)("AOV","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=aov"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"aov"},"/",e)},selected:"aov"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"recovery-rate",size:30}))})),t.push(Object(n.createElement)(v.a,{key:6,value:parseInt(f("unsubscribers")),label:Object(O.__)("Unsubscribes","wp-marketing-automations"),href:"admin.php?page=autonami&path=automation/".concat(r,"/analytics/contact&chart=unsubscribers"),onLinkClickCallback:function(t){t.preventDefault(),delete e.compare,Object(l.k)({chart:"unsubscribers"},"/",e)},selected:"unsubscribers"==m,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(y.a,{icon:"unsubscribe",size:30,color:"#0073aa"}))})),t}))}}())},w=a(807),E=a(131),I=a(252),C=function(t){var e,a=t.query,r=t.type,o=a.chart?a.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),c=Object(_.a)(),i=c.getAnalyticsData,l=c.getAnalyticsLoading,u=c.getAnalyticsTileData,m=l(),p=i(),b=u(),f=a.chartType?a.chartType:"line",d=Object(s.f)(a),v=Object(s.b)(((e=a).period&&""!==e.period||(e.period="month"),e.compare&&""!==e.compare||(e.compare="previous_year"),a));v.includes(d)||(d=v[v.length-1]);var j={email_sents:Object(O.__)("Sent","wp-marketing-automations"),email_open:Object(O.__)("Open","wp-marketing-automations"),email_click:Object(O.__)("Clicks","wp-marketing-automations"),total_orders:Object(O.__)("Orders","wp-marketing-automations"),total_revenue:Object(O.__)("Revenue","wp-marketing-automations")},g={email_sents:Object(O.__)("Sent","wp-marketing-automations"),email_click:Object(O.__)("Clicks","wp-marketing-automations"),total_orders:Object(O.__)("Orders","wp-marketing-automations"),total_revenue:Object(O.__)("Revenue","wp-marketing-automations")},y={active_contacts:Object(O.__)("Active Contacts","wp-marketing-automations"),complete_contacts:Object(O.__)("Complete Contacts","wp-marketing-automations"),unsubscribers:Object(O.__)("Unsubscribe","wp-marketing-automations"),revenue:Object(O.__)("Revenue","wp-marketing-automations"),conversions:Object(O.__)("Orders","wp-marketing-automations"),aov:Object(O.__)("AOV","wp-marketing-automations")},k=function(){switch(r){case"email":return j;case"sms":return g;case"contact":return y}}();return Object(n.createElement)(I.a,{isRequesting:m,data:function(t){switch(r){case"email":return function(t){var e=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(t){case"email_sents":e.push({date:a.start_date,email_sents:{label:Object(O.__)("Email Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"open_rate":e.push({date:a.start_date,email_open:{label:Object(O.__)("Opens","wp-marketing-automations"),value:parseInt(a.subtotals.email_open)}});break;case"click_rate":e.push({date:a.start_date,email_click:{label:Object(O.__)("Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":e.push({date:a.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":e.push({date:a.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return e}(t);case"sms":return function(t){var e=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(t){case"email_sents":e.push({date:a.start_date,email_sents:{label:Object(O.__)("SMS Sent","wp-marketing-automations"),value:parseInt(a.subtotals.email_sents)}});break;case"email_click":e.push({date:a.start_date,email_click:{label:Object(O.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(a.subtotals.email_click)}});break;case"total_orders":e.push({date:a.start_date,total_orders:{label:Object(O.__)("Total Orders","wp-marketing-automations"),value:parseInt(a.subtotals.total_orders)}});break;case"total_revenue":e.push({date:a.start_date,total_revenue:{label:Object(O.__)("Total Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.total_revenue)}})}}))}return e}(t);case"contact":return function(t){var e=[];if(!Object(h.isEmpty)(p)){p.map((function(a){switch(t){case"active_contacts":e.push({date:a.start_date,active_contacts:{label:Object(O.__)("Active Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.active_contacts)}});break;case"complete_contacts":e.push({date:a.start_date,complete_contacts:{label:Object(O.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(a.subtotals.complete_contacts)}});break;case"unsubscribers":e.push({date:a.start_date,unsubscribers:{label:Object(O.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(a.subtotals.unsubscribers)}});break;case"revenue":e.push({date:a.start_date,revenue:{label:Object(O.__)("Revenue","wp-marketing-automations"),value:parseInt(a.subtotals.revenue)}});break;case"conversions":e.push({date:a.start_date,conversions:{label:Object(O.__)("Orders","wp-marketing-automations"),value:parseInt(a.subtotals.conversions)}});break;case"aov":e.push({date:a.start_date,conversions:{label:Object(O.__)("AOV","wp-marketing-automations"),value:parseInt(a.subtotals.aov)}})}}))}return e}(t)}}(o),title:k[o],interval:d,layout:"item-comparison",chartType:f,legendTotals:"aov"==o?{conversions:b.hasOwnProperty("aov")?b.aov:0}:null,interactiveLegend:!0})},A=a(4),S=a(239),D=a(12),P=a.n(D),L=a(17);function M(t,e,a,n,r,o,c){try{var i=t[o](c),s=i.value}catch(t){return void a(t)}i.done?e(s):Promise.resolve(s).then(n,r)}function Y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return F(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var N=function(t){var e=t.query,a=t.automationId,r=e.period,c=e.interval,i=void 0===c?"day":c,l=e.after,u=e.before,m=Object(g.a)(Object(o.U)()).formatAmount,p=Y(Object(n.useState)([]),2),b=p[0],f=p[1],d=Y(Object(n.useState)(!0),2),v=d[0],j=d[1],y=Y(Object(n.useState)(25),2),k=y[0],w=y[1],E=Y(Object(n.useState)(0),2),I=E[0],C=E[1],A=Y(Object(n.useState)(0),2),D=A[0],F=A[1],N=parseInt(I)/parseInt(k)+1,x=Object(_.a)(),T=x.getAnalyticsTileData,R=x.getAnalyticsLoading,q=T(),z=R();Object(n.useEffect)((function(){if(!Object(o.gb)()&&z){var t=q.email_click,e=void 0===t?0:t,a=q.email_open,n=void 0===a?0:a,r=q.email_sents,c=void 0===r?0:r,i=q.total_orders,s=void 0===i?0:i,l=q.revenue,u=void 0===l?0:l;f([{click_count:e,click_rate:(e/c*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),j(!1)}}),[z]);var H=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j(!0),Object(o.gb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,P()({method:"GET",path:Object(o.k)("/analytics/emails/tabular/")+"?"+Object(L.stringify)({after:e,before:n,oid:a,type:1,interval:"day",limit:k,offset:I,mode:1})}).then((function(t){t.hasOwnProperty("result")&&f(t.result),t.hasOwnProperty("total_count")&&F(t.total_count),j(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),j(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function c(t){M(o,n,r,c,i,"next",t)}function i(t){M(o,n,r,c,i,"throw",t)}c(void 0)}))});return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var t,a=((t=e).compare="previous_year",Object(s.c)(t).primary),n="",r="";a&&(Object(h.isEmpty)(a.after)||(n=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(a.before)||(r=a.before.format("YYYY-MM-DD 23:59:59")),Object(h.isEmpty)(n)||Object(h.isEmpty)(r)||H(n,r))}),[r,i,l,u]);var U,V=[{key:"subject",label:Object(O.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(O.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(O.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.qb)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.qb)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],G=function(t){t!==k&&w(t)};return Object(n.createElement)(S.a,{title:Object(O.__)("Email","wp-marketing-automations"),rows:(U=[],Object(h.isEmpty)(b)||b.map((function(t){U.push([{display:t.subject?t.subject:"-",value:t.subject},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.open_rate)?parseFloat(t.open_rate).toFixed(1)+"%":"-",value:t.open_count},{display:parseInt(t.click_rate)?parseFloat(t.click_rate).toFixed(1)+"%":"-",value:t.click_count},Object(o.qb)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.qb)()?{display:parseFloat(t.revenue)>0?m(t.revenue):"-",value:t.revenue}:{}])})),U),headers:V,query:{paged:N},rowsPerPage:k,totalRows:D,isLoading:v,onPageChange:function(t,e){C((t-1)*k)},onQueryChange:function(t){return"per_page"!==t?function(){}:G},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No emails found","wp-marketing-automations")})};function x(t,e,a,n,r,o,c){try{var i=t[o](c),s=i.value}catch(t){return void a(t)}i.done?e(s):Promise.resolve(s).then(n,r)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}var q=function(t){var e=t.query,a=t.automationId,r=e.period,c=e.interval,i=void 0===c?"day":c,l=e.after,u=e.before,m=Object(g.a)(Object(o.U)()).formatAmount,p=T(Object(n.useState)([]),2),b=p[0],f=p[1],d=T(Object(n.useState)(!0),2),v=d[0],j=d[1],y=T(Object(n.useState)(25),2),k=y[0],w=y[1],E=T(Object(n.useState)(0),2),I=E[0],C=E[1],A=T(Object(n.useState)(0),2),D=A[0],M=A[1],Y=parseInt(I)/parseInt(k)+1,F=Object(_.a)(),N=F.getAnalyticsTileData,R=F.getAnalyticsLoading,q=N(),z=R();Object(n.useEffect)((function(){if(!Object(o.gb)()||!z){var t=q.email_click,e=void 0===t?0:t,a=q.email_open,n=void 0===a?0:a,r=q.email_sents,c=void 0===r?0:r,i=q.total_orders,s=void 0===i?0:i,l=q.revenue,u=void 0===l?0:l;f([{click_count:e,click_rate:(e/c*100).toFixed(2),conversions:s,oid:"5",open_count:n,open_rate:(n/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),j(!1)}}),[z]);var H=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(j(!0),Object(o.gb)()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,P()({method:"GET",path:Object(o.k)("/analytics/emails/tabular/")+"?"+Object(L.stringify)({after:e,before:n,oid:a,type:1,interval:"day",limit:k,offset:I,mode:2})}).then((function(t){t.hasOwnProperty("result")&&f(t.result),t.hasOwnProperty("total_count")&&M(t.total_count),j(!1)}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),j(!1);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})),function(){var e=this,a=arguments;return new Promise((function(n,r){var o=t.apply(e,a);function c(t){x(o,n,r,c,i,"next",t)}function i(t){x(o,n,r,c,i,"throw",t)}c(void 0)}))});return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var t,a=((t=e).compare="previous_year",Object(s.c)(t).primary),n="",r="";a&&(Object(h.isEmpty)(a.after)||(n=a.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(a.before)||(r=a.before.format("YYYY-MM-DD 23:59:59")),Object(h.isEmpty)(n)||Object(h.isEmpty)(r)||H(n,r))}),[r,i,l,u]);var U,V=[{key:"subject",label:Object(O.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(O.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(O.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(O.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.qb)()?{key:"orders",label:Object(O.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.qb)()?{key:"revenue",label:Object(O.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],G=function(t){t!==k&&w(t)};return Object(n.createElement)(S.a,{title:Object(O.__)("SMS","wp-marketing-automations"),rows:(U=[],Object(h.isEmpty)(b)||b.map((function(t){var e=parseFloat(t.click_rate)?" ( "+parseFloat(t.click_rate).toFixed(2)+"% ) ":"";U.push([{display:t.subject?t.subject:"-",value:t.subject},{display:t.title?t.title:"-",value:t.title},{display:parseInt(t.sent)?parseInt(t.sent):"-",value:t.sent},{display:parseInt(t.click_count)?t.click_count+e:"-",value:t.click_count},Object(o.qb)()?{display:parseInt(t.conversions)?parseInt(t.conversions):"-",value:t.conversions}:{},Object(o.qb)()?{display:m(t.revenue),value:t.revenue}:{}])})),U),headers:V,query:{paged:Y},rowsPerPage:k,totalRows:D,isLoading:v,onPageChange:function(t,e){C((t-1)*k)},onQueryChange:function(t){return"per_page"!==t?function(){}:G},showMenu:!1,rowHeader:!0,emptyMessage:Object(O.__)("No SMS found","wp-marketing-automations")})},z=a(87);function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!e||a.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}e.default=function(t){var e=t.match.params,a=e.automationId,i=e.type,u=void 0===i?"contact":i,m=t.isV2,p=void 0===m||m,d=Object(l.i)(),v=d.period,j=d.compare,g=d.interval,y=d.after,I=d.before,S=Object(c.a)().setL2NavAlign,D=Object(w.a)(),P=D.fetchAnalytics,L=D.setAnalyticsValues,M=(0,Object(_.a)().getAnalyticsAutomationData)().title,Y=void 0===M?"":M,F=H(Object(n.useState)(!0),2),x=F[0],T=F[1],R=Object(E.a)(),U=R.getAutomationData,V=R.getAutomationId,G=U().title,B=void 0===G?"":G,Q=V();Object(r.a)("analytics",parseInt(a)===parseInt(Q)&&""!==B&&""===Y?B:Y,!0,!1,null,a,!1,p),Object(n.useEffect)((function(){S("left"),Object(o.f)("Automation #"+a),L("automationId",a)}),[]);var $=function(t){return t.compare="previous_year",Object(s.c)(t).primary},J=function(t,e){if(L("analytics",[]),L("tiles",[]),Object(o.gb)()){var n=$(t),r="",c="",i="";if(n){switch(Object(h.isEmpty)(n.after)||(r=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(h.isEmpty)(n.before)||(c=n.before.format("YYYY-MM-DD 23:59:59")),u){case"email":i=1;break;case"sms":i=2;break;case"whatsapp":i=3;break;case"contact":i=4;break;default:i=1}Object(h.isEmpty)(r)||Object(h.isEmpty)(c)||P(a,r,c,e,1,i)}}else setTimeout((function(){!function(){for(var t=$(d),e=0,a=0,n=0,r=0,o=0,c=0,i=0,s=0,l=[],u=t.after;u.isBefore(t.before);u.add(1,"days")){var m=Math.floor(11*Math.random()),p=Math.floor(Math.random()*parseInt(m)),b=Math.floor(Math.random()*parseInt(m)),f=Math.floor(Math.random()*parseInt(b)),O=Math.floor(100*Math.random()).toFixed(2),v=Math.floor(10*Math.random()),j=Math.floor(10*Math.random()),_=Math.floor(10*Math.random()),g=parseFloat(O)>0&&parseInt(f)>0?parseFloat(parseFloat(O)/parseInt(f)).toFixed(2):0;l.push({date_end_gmt:u.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:u.format("YYYY-MM-DD")+" 00:00:00",end_date:u.format("YYYY-MM-DD")+" 23:59:59",interval:u.format("YYYY-MM-DD"),start_date:u.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(p/m*100).toFixed(2),email_click:p,email_open:b,email_sents:m,open_rate:(b/m*100).toFixed(2),total_orders:f,total_revenue:parseFloat(O).toFixed(2),active_contacts:v,complete_contacts:j,unsubscribers:_,revenue:parseFloat(O).toFixed(2),conversions:f,aov:parseFloat(g).toFixed(2)}}),e+=b,a+=m,n+=p,r+=f,o=parseFloat(o)+parseFloat(O),c+=v,i+=j,s+=_}L("tiles",{click_rate:(n/a*100).toFixed(2),email_click:n,email_open:e,email_sents:a,open_rate:(e/a*100).toFixed(2),total_orders:r,total_revenue:o,active_contacts:c,complete_contacts:i,unsubscribers:s,revenue:o,conversions:r,aov:(parseFloat(o)/parseInt(r)).toFixed(2)}),L("analytics",l),L("isLoading",!1)}()}),1e3)};Object(n.useEffect)((function(){var t=d.hasOwnProperty("interval")?d.interval:"day";J(d,t)}),[v,j,g,y,I,u]);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(n.createElement)(f.a,null),Object(n.createElement)(A.ButtonGroup,{className:"bwf-btn-group-tabs"},Object(n.createElement)(A.Button,{isPrimary:u&&"contact"===u,isSecondary:u&&"contact"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/contact")},"/",{})}},Object(O.__)("Contacts","wp-marketing-automations")),Object(n.createElement)(A.Button,{isPrimary:u&&"email"===u,isSecondary:u&&"email"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/email")},"/",{})}},Object(O.__)("Emails","wp-marketing-automations")),!Object(h.isEmpty)(Object(o.j)())&&Object(n.createElement)(A.Button,{isPrimary:u&&"sms"===u,isSecondary:u&&"sms"!==u,onClick:function(){return Object(l.k)({page:"autonami",path:"/automation/".concat(a,"/analytics/sms")},"/",{})}},Object(O.__)("SMS","wp-marketing-automations"))),Object(n.createElement)("div",{className:"bwf_clear_24"}),Object(n.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap"},Object(n.createElement)(b,{query:d}),Object(n.createElement)("div",{className:"bwf_clear_40"}),Object(n.createElement)(k,{query:d,type:u,automationId:a}),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(C,{query:d,type:u}),function(){switch(u){case"email":return Object(n.createElement)(N,{query:d,automationId:a});case"sms":return Object(n.createElement)(q,{query:d,automationId:a});default:return Object(n.createElement)(n.Fragment,null)}}()),!Object(o.gb)()&&Object(n.createElement)(z.a,{isOpen:x,onRequestClose:function(){return T(!1)},closeOnClickOut:!1,modalContent:{demoLabel:Object(O.__)("Try Demo","wp-marketing-automations")}}))}},791:function(t,e,a){"use strict";var n=a(0),r=a(127),o=a(2),c=a(5),i=a(51),s=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t):"admin.php?page=autonami-automations&edit=".concat(t)}};return e&&(a.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/analytics"),isProFeature:!0,showOnClick:!0},a.contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(t,"/contacts"),isProFeature:!0,showOnClick:!0}),a.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/engagements"),isProFeature:!0,showOnClick:!0},Object(c.qb)()&&(a.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:e?"admin.php?page=autonami&path=/automation/".concat(t,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(t,"/orders"),isProFeature:!0,showOnClick:!0}),a};e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},O=f.automation_nav,d=f.automationv2_nav,v=Object(r.a)(),j=v.setActiveMultiple,_=v.resetHeaderMenu,g=v.setL2NavType,y=v.setL2Nav,h=v.setBackLink,k=v.setL2Title,w=v.setL2Content,E=v.setBackLinkLabel,I=v.setL2NavAlign,C=v.setPageHeader;return Object(n.useEffect)((function(){_(),!c&&g("menu"),b||y(u?s(u,p):p?d:O),j({leftNav:p?"automations-v2":"automations-v1",rightNav:t}),a&&h(a),u&&h(a&&!p?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),c||p&&u&&E(Object(o.__)("All Automations","wp-marketing-automations-crm")),!p&&u&&E(Object(o.__)("All Automations","wp-marketing-automations")),u&&I("left"),e&&k(e),!a&&l&&w(l),C("Automations"),p&&C(Object(n.createElement)(n.Fragment,null,"Automations",Object(n.createElement)(i.a,{label:"Next Gen"}))),m&&y({})}),[t,p,e,b]),!0}},794:function(t,e,a){"use strict";var n=a(130),r=a(89);function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}e.a=function(){var t=Object(n.a)("automationList"),e=t.getStateProp,a=s(t,["getStateProp"]),o=Object(n.a)(r.a.recipient).getStateProp,i=Object(n.a)(r.a.conversion).getStateProp,l=Object(n.a)(r.a.contacts).getStateProp,u=Object(n.a)(r.a.analytics).getStateProp;return c(c({},a),{},{getAutomations:function(){return e("automations")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total"))},getLoadingStatus:function(){return e("isLoading")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return e("countData")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getAnalyticsData:function(){return u("analytics")},getAnalyticsTileData:function(){return u("tiles")},getAnalyticsTableData:function(){return u("tableData")},getAnalyticsLoading:function(){return u("isLoading")},getAnalyticsType:function(){return u("type")},getAnalyticsAutomationData:function(){return u("automation")}})}},807:function(t,e,a){"use strict";var n=a(129),r=a(5),o=a(89),c=a(17);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){l(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function u(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}e.a=function(){var t=Object(n.a)("automationList"),e=t.fetch,a=t.setStateProp,i=u(t,["fetch","setStateProp"]),l=Object(n.a)(o.a.recipient),m=l.fetch,p=l.setStateProp,b=Object(n.a)(o.a.conversion),f=b.fetch,O=b.setStateProp,d=Object(n.a)(o.a.contacts),v=d.fetch,j=d.setStateProp,_=Object(n.a)(o.a.analytics),g=_.fetch,y=_.setStateProp;return s(s({},i),{},{fetch:function(t,n,o,c){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];a("automation",{});var s=n.s,l=(n.page,n.filter,n.path,u(n,["s","page","filter","path"])),m={offset:o,limit:c,status:t,search:s,filters:l,version:i?2:1};e("GET",Object(r.k)("/automations"),m)},setAutomationListValues:function(t,e){a(t,e)},fetchRecipient:function(t,e,a){m("GET",Object(r.k)("/automation/".concat(t,"/recipients?limit=").concat(e,"&offset=").concat(a)))},setRecipientsValues:function(t,e){p(t,e)},fetchConversion:function(t,e,a){O("automation",{}),f("GET",Object(r.k)("/automation/".concat(t,"/conversions?limit=").concat(e,"&offset=").concat(a)))},setConversionValues:function(t,e){O(t,e)},fetchContacts:function(t,e,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";j("automation",{}),v("GET",Object(r.k)("/automation/".concat(t,"/contacts?limit=").concat(e,"&offset=").concat(a,"&type=").concat(n,"&search=").concat(o)))},setContactValues:function(t,e){j(t,e)},fetchAnalytics:function(t,e,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(i)&&(s=1),g("GET",Object(r.k)("/analytics/emails/chart/")+"?"+Object(c.stringify)({after:e,before:a,interval:n,oid:t,type:o,mode:i,contact:s}))},setAnalyticsValues:function(t,e){y(t,e)}})}}}]);