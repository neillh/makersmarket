(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1078:function(e,t,c){},1159:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c(2),a=c(4),r=c(3),i=c(65),s=c(24),l=c(249),u=c(122),b=c(5),d=c(8),m=function(e){var t=e.isSyncable,c=void 0!==t&&t,r=e.isConnected,l=e.id,u=e.connector,m=Object(i.b)(),f=!Object(b.gb)()||!Object(b.eb)();return Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)("div",{className:"wfco-connector-btns-left"},!f&&!!r&&Object(n.createElement)(a.Button,{isLink:!0,icon:"no-alt",onClick:function(){return m(s.a.showDisconnectModal(u))}},Object(o.__)("Disconnect","wp-marketing-automations"))),Object(n.createElement)("div",{className:"wfco-connector-btns-right"},!!f&&Object(n.createElement)(a.Button,{className:"bwf-display-flex",isPrimary:!0,onClick:function(){return m(s.a.showGetPro(!0))}},Object(n.createElement)(d.a,{icon:"lock",size:15,color:"#ffffff"}),Object(n.createElement)("span",null,Object(o.__)("Locked","wp-marketing-automations"))),!f&&!r&&Object(n.createElement)(a.Button,{isPrimary:!0,onClick:function(){return m(s.a.showSettingsModal(u))}},Object(o.__)("Connect","wp-marketing-automations")),!f&&!!c&&!!parseInt(l)&&!!r&&Object(n.createElement)(a.Button,{isPrimary:!0,onClick:function(){return m(s.a.showSyncModal(u))}},Object(o.__)("Sync","wp-marketing-automations")),!f&&!!r&&Object(n.createElement)(a.Button,{isSecondary:!0,onClick:function(){return m(s.a.showSettingsModal(u))}},Object(o.__)("Settings","wp-marketing-automations"))))},f=function(){return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)(u.a,{height:90,width:110}))),Object(n.createElement)("div",{className:"wfco_connector_info"},Object(n.createElement)("div",{className:"wfco_connector_info_head"},Object(n.createElement)(u.a,null)),Object(n.createElement)("div",{className:"wfco_connector_info_details"},Object(n.createElement)(u.a,{width:180}),Object(n.createElement)(u.a,{width:160}),Object(n.createElement)(u.a,{width:140})))),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)("div",{className:"wfco-connector-btns"},Object(n.createElement)(u.a,{height:36})))))},O=function(e){var t=e.connector,c=e.connector_id,o=e.name,a=e.logo,r=e.description,i=e.is_connected,s=e.is_syncable;e.meta;return Object(n.createElement)("div",{className:"wfco-col-md-4"},Object(n.createElement)("div",{className:"wfco-connector-wrap"},Object(n.createElement)("div",{className:"wfco-connector_card_outer"},!!a&&Object(n.createElement)("div",{className:"wfco-connector-img-outer"},Object(n.createElement)("div",{className:"wfco-connector-img"},Object(n.createElement)("div",{className:"wfco-connector-img-section"},Object(n.createElement)("img",{src:a})))),Object(n.createElement)("div",{className:"wfco_connector_info"},!!o&&Object(n.createElement)("div",{className:"wfco_connector_info_head"},o),!!r&&Object(n.createElement)("div",{className:"wfco_connector_info_details"},r))),Object(n.createElement)("div",{className:"wfco-connector-action"},Object(n.createElement)(m,{isConnected:i,isSyncable:s,connector:t,id:c}))))},j=c(87);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var v=function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e);var t=Object(i.b)(),c=Object(i.c)(l.a.shouldShowGetPro),a=!Object(b.eb)()&&Object(b.gb)()?{modalContent:{proLink:null,title:Object(o.__)("FunnelKit Automations Connectors","wp-marketing-automations"),content:Object(o.__)("Activate the addon to connect with your favourite service. This pro addon is available in your account for download.","wp-marketing-automations"),demoLabel:Object(o.__)("Close","wp-marketing-automations")}}:{};return Object(n.createElement)(j.a,_({},a,{isOpen:c,onRequestClose:function(){return t(s.a.showGetPro(!1))}}))},w=c(278),g=c(43),p=c(243),h=c(17);function E(e,t,c,n,o,a,r){try{var i=e[a](r),s=i.value}catch(e){return void c(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var c=[],n=!0,o=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(n=(r=i.next()).done)&&(c.push(r.value),!t||c.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var c=Object.prototype.toString.call(e).slice(8,-1);"Object"===c&&e.constructor&&(c=e.constructor.name);if("Map"===c||"Set"===c)return Array.from(e);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var c=0,n=new Array(t);c<t;c++)n[c]=e[c];return n}function k(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function S(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?k(Object(c),!0).forEach((function(t){N(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):k(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}function N(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}var M=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.settingsModalOpen),c=Object(i.c)(l.a.saveConnectorError),u=Object(i.c)(l.a.saveConnectorStatus),b=!!u&&"idle"===u,d=!!u&&"loading"===u,m=!!u&&"connected"===u,f=Object(i.c)(l.a.getCurrentConnector),O=f.fields_schema,j=void 0===O?[]:O,_=f.fields_values,v=void 0===_?{}:_,C=f.name,k=void 0===C?"":C,N=f.is_connected,M=f.connector,P=f.connector_id,x=f.meta,T=(x=void 0===x?{}:x).redirect_url,D=void 0===T?"":T,A=x.connect_type,L=void 0===A?"normal":A,B=x.action,z=void 0===B?"":B,R=x.buttonLabel,F=void 0===R?"":R,I=x.busyLabel,U=void 0===I?"":I,q=Object(n.useCallback)((function(t){return e(s.a.saveConnector({connector:M,settings:N?S(S({},t),{},{id:P}):t}))}),[s.a,N,P]),G=Object(n.useCallback)((function(){window.location.href=D}),[D]),H=y(Object(n.useState)(!1),2),J=H[0],Y=H[1],K=y(Object(n.useState)(!1),2),$=K[0],Q=K[1],V=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,c,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==z){e.next=2;break}return e.abrupt("return");case 2:return t={v:2,action:z},Y(!0),e.next=6,fetch(bwfanParams.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},credentials:"same-origin",body:Object(h.stringify)(t)});case 6:return c=e.sent,e.next=9,c.json();case 9:(n=e.sent).hasOwnProperty("msg")&&"string"==typeof n.msg?(Q(!0),setTimeout((function(){Y(!1)}),1e3),window.location.href=D+"&n="+(new Date).getTime()):Y(!1);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,c=arguments;return new Promise((function(n,o){var a=e.apply(t,c);function r(e){E(a,n,o,r,i,"next",e)}function i(e){E(a,n,o,r,i,"throw",e)}r(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,t&&Object(n.createElement)(a.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwfan-connector-settings-modal",isDismissible:b,shouldCloseOnClickOutside:!1,shoulfCloseOnEsc:!1,onRequestClose:function(){return!!b&&e(s.a.hideSettingsModal())},title:!!k&&Object(o.__)("Connect with ","wp-amrketing-automations-crm")+k},Object(n.createElement)("div",{className:"bwfan-connector-settings-modal-inner"},!!c&&Object(n.createElement)(a.Notice,{status:"error",isDismissible:!0,onRemove:function(){return e(s.a.clearSaveConnectorError())}},c),!!d&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(g.a,null)),!!m&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)(p.a,null),Object(n.createElement)("div",{className:"bwf-h1"},Object(o.__)("Connected / Updated Successfully","wp-marketing-automations"))),!!b&&Object(r.size)(j)>0&&Object(n.createElement)(w.a,{fields:j,values:Object(r.isEmpty)(v)||Object(r.isUndefined)(v)?{}:v,handleSubmit:function(e){return function(e){switch(L){case"redirect_url":G();break;case"ajax_redirect_url":V();break;default:q(e)}}(e)},submitButtonTitle:function(){if(N&&0===Object(r.size)(v))return"";if("ajax_redirect_url"===L){var e="Connect";return $?e="Redirecting...":J&&U?e=U:F&&(e=F),e}return N&&"redirect_url"!==L?"Update":"Connect"}(),isLoading:J,connector:M}),!!b&&0===Object(r.size)(j)&&Object(n.createElement)("p",null,Object(o.__)("No settings available for this connector","wp-marketing-automations")))))},P=c(128),x=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.disconnectModalOpen),c=Object(i.c)(l.a.deleteConnectorError),a=Object(i.c)(l.a.deleteConnectorStatus),r=!!a&&"idle"===a,u=!!a&&"loading"===a,b=!!a&&"success"===a,d=Object(i.c)(l.a.getCurrentConnector).connector;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(P.a,{isOpen:t,modalTitle:Object(o.__)("Disconnect Connector","wp-marketing-automations"),deleteDescriptionText:Object(o.__)("You are about to disconnect connector. All the action, tasks, logs of this connector will be deleted. Cancel to stop, Proceed to continue.","wp-marketing-automations"),confirmButtonText:Object(o.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return e(s.a.deleteConnector(d))},isLoading:u,successMessage:!!b&&Object(o.__)("Disconnected Successfully!","wp-marketing-automations"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideDisconnectModal())},isDelete:!0,showSuccessMsg:!0}))},T=function(){var e=Object(i.b)(),t=Object(i.c)(l.a.syncModalOpen),c=Object(i.c)(l.a.syncConnectorError),a=Object(i.c)(l.a.syncConnectorStatus),r=!!a&&"idle"===a,u=!!a&&"loading"===a,b=!!a&&"success"===a,d=Object(i.c)(l.a.getCurrentConnector),m=d.connector,f=d.connector_id;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(P.a,{isOpen:t,modalTitle:Object(o.__)("Sync Connector","wp-marketing-automations"),deleteDescriptionText:Object(o.__)("You are about to sync connector. All the data of this connector will be synced. Cancel to stop, Proceed to continue","wp-marketing-automations"),confirmButtonText:Object(o.__)("Proceed","wp-marketing-automations"),cancelButtonText:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:function(){return e(s.a.syncConnector({connector:m,id:f}))},isLoading:u,successMessage:!!b&&Object(o.__)("Synced Successfully!","wp-marketing-automations"),errorMessage:!!c&&c,onRequestClose:function(){return!!r&&e(s.a.hideSyncModal())},isDelete:!0,showSuccessMsg:!0}))},D=c(63),A=c(15),L=function(e){var t=e.wfco_connector,c=void 0===t?"":t,o=e.access_token,a=void 0===o?"":o,u=e.bwfco_access_t,b=void 0===u?"":u,d=Object(i.b)(),m="success"===Object(i.c)(l.a.getConnectorsStatus),f=Object(n.useCallback)((function(){d(s.a.showSettingsModal(c)),d(s.a.saveConnector({connector:c,settings:{access_token:Object(r.isEmpty)(a)?b:a}})),Object(A.k)({page:e.page},e.path,{})}),[c,a,d,b]);return Object(n.useEffect)((function(){"bwfco_slack"===c&&(a||b)&&m&&f()}),[c,a,f,m,b]),null},B=function(e){var t=e.bitly,c=void 0===t?"":t,o=e.login,a=void 0===o?"":o,r=e.access_token,u=void 0===r?"":r,b=e.bwfco_access_t,d=void 0===b?"":b,m=Object(i.b)(),f="success"===Object(i.c)(l.a.getConnectorsStatus),O=Object(n.useCallback)((function(){m(s.a.showSettingsModal("bwfco_bitly")),m(s.a.saveConnectorSuccess({connector:"bwfco_bitly",id:"bitly"})),Object(A.k)({page:e.page},e.path,{});var t=setTimeout((function(){m(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}),[m]);return Object(n.useEffect)((function(){"yes"===c&&(u||d)&&a&&O()}),[c,u,a,O,f,d]),null},z=function(e){var t=e.wfco_connector,c=void 0===t?"":t,a=e.status,r=void 0===a?0:a,u=e.error_msg,b=Object(i.b)(),d="success"===Object(i.c)(l.a.getConnectorsStatus);return Object(n.useEffect)((function(){if("bwfco_mautic"===c&&"success"===r&&d){b(s.a.showSettingsModal(c)),b(s.a.dummyConnectorSuccess()),Object(A.k)({page:e.page},e.path,{});var t=setTimeout((function(){b(s.a.hideSettingsModal()),clearInterval(t)}),3e3)}if("bwfco_mautic"===c&&"failed"===r&&d){b(s.a.showSettingsModal(c));var n=u||Object(o.__)("Unknown Error Occurred","wp-marketing-automations");b(s.a.saveConnectorFailed(n))}}),[c,r,d]),null},R=function(e){var t=e.wfco_connector,c=void 0===t?"":t,o=e.code,a=void 0===o?"":o,r=e.state,u=void 0===r?"":r,b=e.client_id,d=void 0===b?"":b,m=e.client_secret,f=void 0===m?"":m,O=e.redirect_url,j=void 0===O?"":O,_=Object(i.b)(),v="success"===Object(i.c)(l.a.getConnectorsStatus),w=Object(i.c)(l.a.getConnector("bwfco_zoom")),g=w&&w.fields_values?w.fields_values:{},p=w&&w.fields_schema?w.fields_schema:{},h=Object(n.useCallback)((function(){_(s.a.showSettingsModal(c)),_(s.a.saveConnector({connector:c,settings:{code:a,state:u,client_id:d,client_secret:f,redirect_url:j}}))}),[c,a,u,_,d,f,j]);return Object(n.useEffect)((function(){if((g.code||g.state)&&g.client_id&&g.client_secret&&g.redirect_url){var t={client_id:g.client_id,client_secret:g.client_secret,redirect_url:g.redirect_url};_(s.a.setConnectorSchema({connector:"bwfco_zoom",schema:p,values:t,saveStatus:"connected"})),Object(A.k)({page:e.page},e.path,{})}}),[g]),Object(n.useEffect)((function(){"bwfco_zoom"===c&&a&&u&&v&&h()}),[c,a,u,h,v]),null},F=c(127),I=c(132),U=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,c=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},o=Object(F.a)(),a=o.setActiveMultiple,r=o.setL2NavType,i=o.setL2Nav,s=o.resetHeaderMenu,l=o.setPageHeader,u=o.setPageCountData,b=Object(I.a)(),d=b.getPageCountData,m=d();return Object(n.useEffect)((function(){m!==t&&(s(),a({leftNav:"connectors",rightNav:e}),r("menu"),i(c.connectors_nav),l("Connectors"),t&&u(t))}),[e,t]),!0},q=(c(1078),function(e){var t=e.connector,c=void 0===t?"":t,o=e.code,a=void 0===o?"":o,r=e.state,u=void 0===r?"":r,b=e.client_id,d=void 0===b?"":b,m=e.client_secret,f=void 0===m?"":m,O=Object(i.b)(),j="success"===Object(i.c)(l.a.getConnectorsStatus),_=Object(i.c)(l.a.getConnector("bwfco_keap")),v=_&&_.fields_values?_.fields_values:{},w=_&&_.fields_schema?_.fields_schema:{},g=Object(n.useCallback)((function(){O(s.a.showSettingsModal("bwfco_keap")),O(s.a.saveConnector({connector:"bwfco_keap",settings:{code:a,state:u,client_id:d,client_secret:f}}))}),[c,a,u,O,d,f]);return Object(n.useEffect)((function(){if((v.code||v.state)&&v.client_id&&v.client_secret){var t={client_id:v.client_id,client_secret:v.client_secret};O(s.a.setConnectorSchema({connector:"bwfco_keap",schema:w,values:t,saveStatus:"connected"})),Object(A.k)({page:e.page},e.path,{})}}),[v]),Object(n.useEffect)((function(){"keap"===c&&a&&u&&j&&g()}),[c,a,u,g,j]),null});function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var c=arguments[t];for(var n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n])}return e}).apply(this,arguments)}var H=Object(n.memo)((function(e){var t=e.size,c=void 0===t?15:t;return Object(n.createElement)("div",{className:"wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},Array.from(Array(c).keys()).map((function(e){return Object(n.createElement)(f,{key:e})})))))})),J=Object(n.memo)((function(e){var t=e.selected,c=void 0===t?"all":t,u=location&&location.search?Object(h.parse)(location.search.substring(1)):{};L(u),B(u),z(u),q(u),R(u);var d=Object(i.c)(l.a.settingsModalOpen),m=Object(i.c)(l.a.disconnectModalOpen),f=Object(i.c)(l.a.syncModalOpen),j=Object(i.b)(),_=Object(i.c)(l.a.getConnectorsStatus),w=Object(i.c)(l.a.getConnectorsError),g=Object(i.c)(l.a.getConnectors),p="loading"===_,E=Object(i.c)(l.a.getConnectorsCount),y=0;Object(n.useEffect)((function(){Object(b.f)(Object(o.__)("Connectors","wp-marketing-automations")),j(s.a.getConnectors()),y=0}),[]);var C={all:Object(o.__)("No connector found","wp-marketing-automations"),active:Object(o.__)("No active connector found","wp-marketing-automations"),inactive:Object(o.__)("No inactive connector found","wp-marketing-automations")};U(Object(o.__)("Connectors","wp-marketing-automations"),c,E),Object(n.useEffect)((function(){if(!Object(r.isEmpty)(g)){var e=[],t={all:0,active:0,inactive:0};Object.keys(g).sort().forEach((function(n){var o=g[n];("all"===c||"inactive"===c&&!o.is_connected||"active"===c&&o.is_connected)&&(y++,e.push(n)),t.all++,o.is_connected?t.active++:t.inactive++})),j(s.a.getCount(t))}}),[g,c]);var k=Object(n.useMemo)((function(){if(!Object(r.isEmpty)(g)){var e=[];return Object.keys(g).sort().forEach((function(t){var n=g[t];("all"===c||"inactive"===c&&!n.is_connected||"active"===c&&n.is_connected)&&(y++,e.push(t))})),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(D.a,null),Object(n.createElement)("div",{className:"wfco_global wfco_connector_listing"},Object(n.createElement)("div",{className:"wfco_connector_listing_wrap wfco_clearfix"},Object(n.createElement)("div",{className:"wfco-row"},e.map((function(e){return Object(n.createElement)(O,G({key:e,connector:e},g[e]))})),0===y&&Object(n.createElement)("div",{className:"bwf-p"},C[c])))))}}),[g,c]);return Object(n.createElement)("div",{className:"bwfan_global bwfan_global_settings bwfan_connectors"},Object(n.createElement)("div",{className:"bwfan_global_settings_wrap"},!!w&&Object(n.createElement)(a.Notice,{status:"error"},w),!!p&&Object(n.createElement)(H,null),!p&&!!g&&k,d&&Object(n.createElement)(M,null),m&&Object(n.createElement)(x,null),f&&Object(n.createElement)(T,null),Object(n.createElement)(v,null)))}));t.default=J}}]);